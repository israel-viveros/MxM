/*!
 *   TIM Developer: Israel Viveros
 *   Version: 1.1
 *   Copyright: Televisa Interactive Media (2014)
 */
(function(){$.fn.mxmLiveDraft=function(d){var b=$.extend({idTournament:0},d);
var a=this;var c={feedActions:"http://lab.israelviveros.com/draft/"+b.idTournament+"/feed.js",drawMaquetado:function(){var g="";g+='<div class="wdg_mxm_live_03"> ';
g+='<div class="scroll">';g+='<div class="wdg_mxm_live_03_status">';g+='<ul class="wdg_mxm_live_03_list"></ul>';g+="</div></div>";g+='<div class="arrow_buttons"> ';
g+='<a href="#" title="Link Description" class="prev ui-link"><div class="dropdown-white"><i class="tvsa-caret-up"></i></div></a> ';g+='<a href="#" title="Link Description" class="next ui-link"><div class="dropdown-white"><i class="tvsa-caret-down"></i></div></a>  ';
g+="</div>";g+='<div class="degraded"></div>';g+="</div>";a.html(g);try{c.loadFeed();}catch(f){console.log(f);}},loadFeed:function(){var e="";$.ajax({url:c.feedActions,type:"GET",jsonpCallback:"actionsDraft",dataType:"jsonp",cache:false}).done(function(j){console.log(j);
for(var h=0;h<j.length;h++){var g=String(j[h].fecha).split("/");var f="";switch(parseInt(g[1])){case 1:f="Ene";break;case 2:f="Feb";break;case 3:f="Mar";
break;case 4:f="Abr";break;case 5:f="May";break;case 6:f="Jun";break;case 7:f="Jul";break;case 8:f="Ago";break;case 9:f="Sep";break;case 10:f="Oct";break;
case 11:f="Nov";break;case 12:f="Dic";break;}e+="<li>";e+='<div class="textcolor-title2 time">'+g[0]+"."+f;e+=((j[h].hora)!=="undefined")?"<p>"+j[h].hora+"</p></div>":"</div>";
e+='<div class="chronic">';e+='<div class="logoTeam"><img src="'+j[h].icon+'" alt="Image description"> </div>';e+=(typeof(j[h].Jugador)!=="undefined")?"<h2>"+j[h].Jugador+"</h2>":"";
e+=(typeof(j[h].descripcion)!=="undefined")?'<div class="chronic_description">'+j[h].descripcion+"</div>":"";e+="</div>";e+="</li>";}a.find("ul.wdg_mxm_live_03_list").html(e);
c.funcionesNAAT();}).fail(function(){console.log("error al cargar el feed "+c.feedActions);});},funcionesNAAT:function(){jQuery(function(e){(function(j,i){function g(){j(".wdg_mxm_live_03 .not_here").hide();
j(".wdg_mxm_live_03 .vid_player_01 .not_here").hide();j(".wdg_mxm_live_03 .img_stage_01 .not_here").hide();j(".wdg_mxm_live_03 .vid_player_01 .not_here").css("display","none");
j(".wdg_mxm_live_03 .img_stage_01 .not_here").css("display","none");j(".wdg_mxm_live_03 .tvsa-videocamera").removeClass("tvsa-mxm-close");j(".wdg_mxm_live_03 .tvsa-camera").show();
}j(".wdg_mxm_live_03").each(function(k,l){var o=j(this),n={UP:(i.getIsTouchDevice())?"touchend":"mouseup",DOWN:(i.getIsTouchDevice())?"touchstart":"mousedown"},m=o.find(".wdg_mxm_live_03_list");
o.find("a.prev, a.next").click(function(p){p.preventDefault();});o.find("a.prev").bind(n.DOWN,function(){j(".wdg_mxm_live_03 .scroll").animate({scrollTop:j(".wdg_mxm_live_03 .scroll").scrollTop()-m.height()},500);
});o.find("a.next").bind(n.DOWN,function(){j(".wdg_mxm_live_03 .scroll").animate({scrollTop:j(".wdg_mxm_live_03 .scroll").scrollTop()+m.height()},500);
});});j(".wdg_mxm_live_03 .wdg_mxm_live_03_verMas").click(function(k){k.preventDefault();j(".wdg_mxm_live_03 ul").css("height","auto");j(".wdg_mxm_live_03 .wdg_mxm_live_03_verMas").hide();
j(".wdg_mxm_live_03 .degradado").hide();});var h=0;var f=0;j(".wdg_mxm_live_03 .tvsa-camera").on("click",function(l){j(".wdg_mxm_live_03 .tvsa-videocamera").removeClass("textcolor-title1");
j(".wdg_mxm_live_03 .tvsa-camera").removeClass("textcolor-title1");j(".wdg_mxm_live_03 .vid_player_01").removeClass("here").addClass("not_here");j(".wdg_mxm_live_03 .img_stage_01").removeClass("here").addClass("not_here");
j(this).parent().next(".img_stage_01").removeClass("not_here").addClass("here");g();var k=j(this).parent().next(".img_stage_01").css("display");if(k=="block"){j(this).parent().next(".img_stage_01").removeClass("here").addClass("not_here");
j(this).parent().next(".img_stage_01").hide();j(this).addClass("textcolor-title1");}else{j(this).parent().next(".img_stage_01").show();}j(this).toggleClass("textcolor-title1");
j(this).parent().siblings(".not_here").hide();j(this).parent().siblings(".vid_player_01").hide();j(this).parent().siblings(".icon-interactive").find("i").removeClass("textcolor-title1");
j(this).toggleClass("tvsa-mxm-close");});j(".wdg_mxm_live_03 .tvsa-videocamera").on("click",function(k){j(".tvsa-videocamera").removeClass("active");f=j(this).attr("class");
if(f=="tvsa-videocamera"){j(".vid_player_01").hide();j(".tvsa-videocamera").removeClass("tvsa-mxm-close");j(".tvsa-videocamera").removeClass("textcolor-title1");
j(".img_stage_01").hide();j(".tvsa-camera").removeClass("textcolor-title1");j(".tvsa-camera").show();}j(this).addClass("active");j(this).parent().siblings(".vid_player_01").toggle();
j(this).toggleClass("textcolor-title1");j(this).parent().siblings(".img_stage_01").hide();j(this).toggleClass("tvsa-mxm-close");activo_vid2=j(this).attr("class");
j(".wdg_mxm_live_03 .tvsa-camera").removeClass("tvsa-mxm-close");j("tvsa-camera").show();if(activo_vid2=="tvsa-videocamera active"){j(".tvsa-videocamera").removeClass("active");
}});j(".wdg_mxm_live_03 .scroll").scroll(function(){var k=j(".wdg_mxm_live_03 .wdg_mxm_live_03_list").height();$scrollTop=parseInt(j(".wdg_mxm_live_03 .scroll").scrollTop())+parseInt(j(".wdg_mxm_live_03 .scroll").height());
if(parseInt($scrollTop)==parseInt(k)){j(".wdg_mxm_live_03 .degraded").css("visibility","hidden");}else{j(".wdg_mxm_live_03 .degraded").css("visibility","visible");
}});})(e,Televisa);});}};c.drawMaquetado();};})(jQuery);