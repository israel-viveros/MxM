(function(){$.fn.MxMAltasBajasDraft=function(c){var d=$.extend({idTorneo:0},c);console.log("Altas Bajas Draft");var a={urlData:"http://lab.israelviveros.com/draft/"+d.idTorneo+"/draft.js",tagWdgPlayerdraft:$("#containerwdg_playerdraft_01"),viewHtml:function(o){var f="";
var s="";var t="";var u="";f=o.draftPurchase;s=o.draftLoan;t=o.draftTransfers;u=o.draftURL;maquetado="<div id='wdg_playerdraft_01' class='wdg_playerdraft_01'>";
maquetado+="<div class='titulo textcolor-title2'><h2>Balance en el Draft</h2></div>";maquetado+="<div class='div1 dotted-right'>Compras <div class='gris'>"+f+"</div></div>";
maquetado+="<div class='div2'>Prestamos";maquetado+="<div class='gris'>"+s+"</div>";maquetado+="</div>";maquetado+="<div class='dotted-top lineasep'></div>";
maquetado+="<div class='div3'>Transferencias Draft";maquetado+="<div class='textcolor-title2'>"+t+"</div>";maquetado+="</div>";maquetado+="<div class='subtitle'>";
maquetado+="<div class='textcolor-title4'>Elige a tu jugador y vota</div>";maquetado+="</div>";maquetado+="<div class='scroll'>";maquetado+="<table class='tblDraft'>";
maquetado+="<tbody>";maquetado+="<tr>";maquetado+="<th width='131' class='textcolor-title1'>JUGADOR</th>";maquetado+="<th width='78' class='textcolor-title1'>ADQUIRI&Oacute;</th>";
maquetado+="<th width='68' class='textcolor-title1'>TRANSFIRI&Oacute;</th>";maquetado+="<th width='40' class='textcolor-title1'>OPERACI&Oacute;N</th>";
maquetado+="<th width='45' class='textcolor-title1'>TD</th>";maquetado+="<th width='45' class='textcolor-title1'>AFICI&Oacute;N</th>";maquetado+="</tr>";
maquetado+="<tr>";maquetado+="<td colspan='6' class='separador' style='position:relative; text-shadow:0px #fff;'></td>";maquetado+="</tr>";for(var p=0;
p<o.draftTeams.length;p++){console.log("Team"+p);for(var g=0;g<o.draftTeams[p]["operation"].length;g++){var l="";var m="";var h="";var r="";var q="";var j="";
var e="";var k="";e=o.draftTeams[p]["operation"][g]["id"];l=o.draftTeams[p]["operation"][g]["name"];m=o.draftTeams[p]["operation"][g]["acquire"];h=o.draftTeams[p]["operation"][g]["transfer"];
r=o.draftTeams[p]["operation"][g]["type"];q=o.draftTeams[p]["operation"][g]["rantingTD"];j=o.draftTeams[p]["operation"][g]["ratingUser"];k=o.draftTeams[p]["operation"][g]["playerURL"].split("/");
k=k[4];console.log(k);maquetado+="<tr class='vote_block'>";maquetado+="<td class='dotted-right'>";maquetado+="<h3 data-urlDraft='"+u+"' data-url='http://polls.esmas.com/jugadores/torneo/"+d.idTorneo+"/partido/"+e+"/jugador/"+k+"'>"+l+"</h3>";
maquetado+="</td>";maquetado+="<td class='dotted-right'>"+m+"</td>";maquetado+="<td class='dotted-right'>"+h+"</td>";maquetado+="<td class='dotted-right'>"+r+"</td>";
maquetado+="<td class='dotted-right'>"+q+"</td>";maquetado+="<td class='textcolor-title1'>"+j+"</td>";maquetado+="</tr>";maquetado+="<tr>";maquetado+="<td colspan='6' class='separador' style='position:relative; text-shadow: 0px 0px 0px #FFF;'>";
maquetado+="<div class='dotted-top'></div>";maquetado+="<div class='qualifies'><div>califica al jugador</div></div>";maquetado+="<div class='calification textcolor-title4'>";
maquetado+="<div><a href='#'>5</a></div>";maquetado+="<div><a href='#'>6</a></div>";maquetado+="<div><a href='#'>7</a></div>";maquetado+="<div><a href='#'>8</a></div>";
maquetado+="<div><a href='#'>9</a></div>";maquetado+="<div><a href='#'>10</a></div>";maquetado+="</div>";maquetado+="<div class='participated  textcolor-title4'>";
maquetado+="<div class='voted'><p>Gracias por votar <i class='tvsa-like'></i></p></div>";maquetado+="</div>";maquetado+="</td>";maquetado+="</tr>";}}maquetado+="</tbody>";
maquetado+="</table>";maquetado+="</div>";maquetado+="</div>";a.tagWdgPlayerdraft.html(maquetado);},cl_url:function(e){b=e.search(/\?/);if(b!=-1){b=e.search(/\=/);
if(b!=-1){e=e.replace(/\=/g,"_");e=e.replace(/\&/g,"/");e=e.replace("?","/no_clean_url/");}}b=e.search(/\#/);if(b!=-1){e=e.substring(0,b);}b=e.search(/\?/);
if(b!=-1){e=e.substring(0,b);}return e;},funcionesNaat:function(){console.log("Funciones...");$(".containerwdg_playerdraft_01 .wdg_playerdraft_01 .tblDraft .vote_block").on("touchstart",function(i){if($(window).width()>624){var h=$(this).next("tr").find("td.separador .qualifies").css("display");
var g=$(this).next("tr").find("td.separador .calification").css("display");var f=$(this).next("tr").find("td.separador .participated").css("display");if(h!="none"||g!="none"||f!="none"){$(this).next("tr").find("td.separador .qualifies").hide();
$(this).next("tr").find("td.separador .calification").hide();$(this).next("tr").find("td.separador .participated").hide();$(this).next("tr").find("td.separador .dotted-top").show();
}else{$(this).next("tr").find("td.separador .qualifies").show();$(this).next("tr").find("td.separador .calification").show();$(this).next("tr").find("td.separador .dotted-top").hide();
}if(g==null&&f=="none"){$(this).next("tr").find("td.separador .qualifies").show();$(this).next("tr").find("td.separador .participated").show();$(this).next("tr").find("td.separador .dotted-top").hide();
}}else{}});$(".containerwdg_playerdraft_01 .wdg_playerdraft_01 .tblDraft .vote_block").mouseenter(function(){$(this).next("tr").find("td.separador .qualifies").show();
if($(window).width()<624){return;}e();$(this).next("tr").find("td.separador .dotted-top").hide();$(this).next("tr").find("td.separador .qualifies").show();
if($(this).next("tr").find(" td.separador .calification").length>0){$(this).next("tr").find(" td.separador .calification").show();}else{$(this).next("tr").find(" td.separador .participated").show();
}});$(".containerwdg_playerdraft_01 .wdg_playerdraft_01 .tblDraft ").mouseleave(function(){e();});$(".containerwdg_playerdraft_01 .wdg_playerdraft_01 .tblDraft .separador .calification a").click(function(m){m.preventDefault();
var g=$(this).text();var i=$(this).parents("tr");var j=i.prev();var k=j.children(":first-child");console.log(k);var f=j.children(".textcolor-title1");console.log("porcentaje");
console.log(f.text());var h=k.find("h3").data("url");var l="";console.log(h);console.log(g+" - "+h+" - "+l);if(typeof l=="undefined"){l=null;}if(typeof h=="undefined"){h=a.cl_url(h);
}console.log(g);console.log(h);f.html("1");$(this).parents(".calification").hide();$(this).parents(".separador").find(".participated").fadeIn().delay(1000).fadeOut(function(){$(this).parents(".separador").find(".qualifies").hide();
$(this).parents(".separador").find(".dotted-top").show();});$(this).parents(".calification").remove();});$(".containerwdg_playerdraft_01 .wdg_playerdraft_01 .tblDraft .separador .participated").mouseout(function(){$(this).hide();
$(this).parents(".separador").find(".qualifies").hide();$(this).parents(".separador").find(".dotted-top").show();});function e(){$(".wdg_playerdraft_01 .tblDraft td.separador .calification").hide();
$(".wdg_playerdraft_01 .tblDraft td.separador .participated").hide();$(".wdg_playerdraft_01 .tblDraft td.separador .qualifies").hide();$(".wdg_playerdraft_01 .tblDraft td.separador .dotted-top").show();
}if($.browser.msie&&parseInt($.browser.version,10)<=8){$(".wdg_playerdraft_01 .tblDraft td").css("display","block");$(".wdg_playerdraft_01 .tblDraft th").css("display","block");
}},getDataDraft:function(){console.log(a.urlData);$.ajax({url:a.urlData,type:"GET",dataType:"jsonp",jsonpCallback:"llave",cache:false,success:function(e){a.viewHtml(e);
},error:function(e){console.log("ERROR___");}});}};$.when(a.getDataDraft()).done(function(){setTimeout(function(){a.funcionesNaat();},3000);});};})(jQuery);
