(function(){$.fn.wdgMxmLive=function(a){var d=$.extend({idjornada:0,idmatch:0,title:""},a);var b=this;var c={urlFinal:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+d.idjornada+"/"+d.idmatch+"/match_mxm.js",callback:"datamxmvivo",urlfeedHeader:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+d.idjornada+"/"+d.idmatch+"/match_header.js",feedCallbackHeader:"mxmheader",inicio:function(){Maquetado="";
Maquetado+='<div class="wdg_mxm_live_04_title textcolor-title1">'+d.title+"</div>";Maquetado+='<div class="wdg_mxm_live_04_status">';Maquetado+='<ul class="wdg_mxm_live_04_list" id="pintaAcciones"></ul>';
Maquetado+="</div>";Maquetado+='<div class="see_less textcolor-title4">Ocultar</div>';b.html(Maquetado);c.loadMaster();},loadMaster:function(){var f=Math.floor((1+Math.random())*65536).toString(16);
var e="",g="";$.ajax({url:c.urlFinal,type:"GET",dataType:"jsonp",jsonpCallback:c.callback,cache:false}).done(function(o){for(var j=0;j<o.actionsMXM.length;
j++){var n="",q="";switch(o.actionsMXM[j].type.toLowerCase()){case"amonestacion":g="mxm-yellowcard";break;case"autogol":g="mxm-owngoal";break;case"comentario":g="mxm-comment";
break;case"datoestadistico":g="mxm-statisticdata";break;case"desdeafueradelarea":g="mxm-offside";break;case"elpartidohasidosuspendido":g="";break;case"empiezasegundotiempo":g="mxm-startsecondhalf";
break;case"empiezanpenales":g="mxm-penalties";break;case"expulsion":g="mxm-redcard";break;case"fallaelpenal":g="mxm-out";break;case"finalizaelpartido":g="mxm-gameend";
break;case"fueradelugar":g="mxm-offside";break;case"twitter":g="twitter";break;case"gol":g="mxm-goal";break;case"iniciaelsegundotiempo":g="mxm-startsecondhalf";
break;case"iniciaprimertiempoextra":g="mxm-startextrafirsthalf";break;case"iniciasegundotiempoextra":g="mxm-startextrasecondhalf";break;case"pasaporafuera":g="mxm-out";
break;case"pegaenelposte":g="mxm-crossbar";break;case"penal":g="mxm-penaltykick";break;case"segundaamonestacion":g="mxm-secondyellowcard";break;case"terminaprimertiempo":g="mxm-gameend";
break;case"terminaprimertiempoextra":g="mxm-gameend";break;case"terminasegundotiempo":g="mxm-gameend";break;case"terminasegundotiempoextra":g="mxm-gameend";
break;case"falta":g="mxm-foul";break;case"tirodeesquina":g="mxm-cornerkick";break;case"entraaljuego":g="mxm-playerin";break;default:g="";break;}e+='<li data-id="'+f+'" style="display:none">';
e+=(g==="twitter")?'<div class="time-icon twitter">':'<div class="time-icon">';e+='<div class="textcolor-title6 time">'+o.actionsMXM[j].minute+"'</div>";
if(g==="twitter"){e+='<div class="icon-time"><i class="tvsa-twitter"></i></div>';}else{e+='<div class="icon-time"><i class="tvsa-'+g+'"></i></div>';}e+="</div>";
e+=(g!=="twitter")?'<div class="chronic"><span>'+o.actionsMXM[j].description+"</span></div>":"";if(g==="twitter"){var p=o.actionsMXM[j].description.replace(",","|");
var m=p.split("|");var k=m[0].split("@");e+='<div class="chronic">';e+='<p class="textcolor-title2">'+k[0]+'<span class="textcolor-title4">@'+k[1]+"</span></p>";
e+="<p>"+m[1]+"</p></div>";}if(typeof o.actionsMXM[j].datarelated!=="undefined"){for(var h=0;h<o.actionsMXM[j].datarelated.length;h++){if(o.actionsMXM[j].datarelated[h].type.toLowerCase()==="galeria"){q+='<div class="img_stage_01 not_here" style="display: none;">';
q+='<div class="img_stage_01_image"> <img src="'+o.actionsMXM[j].datarelated[h].url+'" alt="Image description"> </div>';if(typeof o.actionsMXM[j].datarelated[h].imagenTitulo!=="undefined"&&typeof o.actionsMXM[j].datarelated[h].imagenDesc!=="undefined"){q+=(o.actionsMXM[j].datarelated[h].imagenDesc!=="")?'<a class="img_stage_01_whtbkg" href="#"><p class="img_stage_01_black">'+o.actionsMXM[j].datarelated[h].imagenTitulo+"</p>":"";
q+=(o.actionsMXM[j].datarelated[h].imagenTitulo!=="")?'<p class="img_stage_01_gray">'+o.actionsMXM[j].datarelated[h].imagenDesc+"</p></a>":"";q+="</div>";
}}if(o.actionsMXM[j].datarelated[h].type.toLowerCase()==="video"){n+='<div class="vid_player_01 not_here" style="display: none;">';n+='<div class="vid_player_01_image">';
n+='<iframe width="100%" height="100%" src="" data-id="'+o.actionsMXM[j].datarelated[h].id+'" ></iframe>';n+='<div class="theaterContainer">';n+='<div class="theaterSideSpacer"></div>';
n+='<div class="theaterContainerVideo">';n+='<div class="videoLink"></div>';n+='<div class="contenedor"></div>';n+="</div>";n+='<div class="theaterSideSpacer"></div>';
n+="</div>";n+='<div class="companionBanner"></div>';n+="</div>";n+="</div>";}}}e+=(n!=="")?'<div class="icon-interactive textcolor-title4"> <i class="tvsa-videocamera"></i><i class="tvsa-error not-displayed"></i> </div>':"";
e+=(q!=="")?'<div class="icon-interactive2 dotted-right textcolor-title4"> <i class="tvsa-camera"></i> </div>':"";e+=q+n;e+="</li>";}b.find("#pintaAcciones").html(e);
$("[data-id="+f+"]").fadeIn("slow");c.funciones();}).fail(function(){console.log("error");});},funciones:function(){b.find(".tvsa-camera").live("click",function(e){e.preventDefault();
var f=$(this).parent().siblings(".img_stage_01");if(!$(this).hasClass("active")){$(".tvsa-camera").removeClass("active textcolor-title1 tvsa-error");$(this).addClass("active textcolor-title1 tvsa-error");
$(".img_stage_01").slideUp("slow");f.slideDown("slow",function(){});}else{$(this).removeClass("active textcolor-title1 tvsa-error");f.slideUp("slow");}});
b.find(".tvsa-videocamera").live("click",function(g){g.preventDefault();var h=$(this).parent().siblings(".vid_player_01.not_here");var f,e;if(!$(this).hasClass("active")){$(".tvsa-videocamera").removeClass("active textcolor-title1 tvsa-error");
$(this).addClass("active textcolor-title1 tvsa-error");$(".vid_player_01.not_here").slideUp("slow").find("iframe").attr({src:""});h.slideDown("slow",function(){e=parseInt($(this).outerWidth()*9/16);
$(this).height(e);$(this).find(".vid_player_01_image").height(e);f=$(this).find("iframe");f.attr({src:"http://tv.televisadeportes.esmas.com/embed/embed_ampp.php?id="+f.data("id")+"&w="+$(this).outerWidth()+"&h="+e+""});
});}else{$(this).removeClass("active textcolor-title1 tvsa-error");h.slideUp("slow",function(){f=$(this).find("iframe");f.attr({src:""});});}});c.header();
},header:function(){$.ajax({url:c.urlfeedHeader,jsonpCallback:c.feedCallbackHeader,type:"GET",dataType:"jsonp"}).done(function(e){c.timeUpdate(e.fechaPartido,e.horaPartido);
}).fail(function(){console.log("Error al cargar el header "+c.urlfeedHeader);});},timeUpdate:function(h,e){var f=0;var g=h.substring(3,5)+"-"+h.substring(0,2)+"-"+h.substring(8,10)+" "+e.substring(0,5)+":00";
$.ajax({url:"http://mxm.televisadeportes.esmas.com/deportes/home/timetvjsonp.js",async:false,cache:false,dataType:"jsonp",jsonpCallback:"timetv",success:function(o){var q="";
var l=0;var k=0;horas=o.timetv;q=o.fechatv.replace(/_/gi,"-").split("-");l=parseInt(q[1])+1;if(String(l).length==1){l="0"+l;}k=parseInt(q[2])+1900;fechas=l+"-"+q[0]+"-"+k;
fechas=fechas+" "+horas+":00";var u=new Date(g);var t=new Date(fechas);var p=Date.UTC(u.getFullYear(),u.getMonth()+1,u.getDate());var n=Date.UTC(t.getFullYear(),t.getMonth()+1,t.getDate());
if(parseFloat(p)<parseFloat(n)){}else{if(parseFloat(p)==parseFloat(n)){f=60000;var j=parseInt(t.getHours()-u.getHours());if(t.getHours()>=u.getHours()){f=60000;
}else{var s=u.getHours();var r=t.getHours();var w=u.getMinutes();var v=t.getMinutes();var i=(((s-r)*60)+w)-v;if(i<=15){f=60000;}else{(i<60)?f=900000:"";
}}setInterval(function(){c.updateMxm();},f);}else{if(parseFloat(p)>parseFloat(n)){}else{}}}}});},updateMxm:function(){var e="",f="";$.ajax({url:c.urlFinal,type:"GET",dataType:"jsonp",jsonpCallback:c.callback,cache:false}).done(function(m){var g=Math.floor((1+Math.random())*65536).toString(16);
var q=b.find("#pintaAcciones").children("li").size();var t=m.actionsMXM.length;if(t>q){var o=t-q;for(var n=0;n<o;n++){var h="",s="";switch(m.actionsMXM[n].type.toLowerCase()){case"fueradelarea":f="";
break;case"centroalarea":f="";break;case"tirodeesquina":f="";break;case"disparoagol":f="";break;case"atajada":f="block";break;case"comentario":f="";break;
case"gollocal":f="goal";break;case"saledeljuego":f="";break;case"entraaljuego":f="";break;case"empiezasegundotiempo":f="gameend";break;case"golvisitante":f="goal";
break;case"amonestacion":f="yellowcard";break;case"twitter":f="twitter";break;}e+='<li data-id="'+g+'" style="display:none">';e+=(f==="twitter")?'<div class="time-icon twitter">':'<div class="time-icon">';
e+='<div class="textcolor-title6 time">'+m.actionsMXM[n].minute+"'</div>";if(f==="twitter"){e+='<div class="icon-time"><i class="tvsa-'+f+'"></i></div>';
}else{e+='<div class="icon-time"><i class="tvsa-mxm-'+f+'"></i></div>';}e+="</div>";e+=(f!=="twitter")?'<div class="chronic"><span>'+m.actionsMXM[n].description+"</span></div>":"";
if(f==="twitter"){var p=m.actionsMXM[n].description.replace(",","|");var j=p.split("|");var r=j[0].split("@");e+='<div class="chronic">';e+='<p class="textcolor-title2">'+r[0]+'<span class="textcolor-title4">@'+r[1]+"</span></p>";
e+="<p>"+j[1]+"</p></div>";}if(typeof m.actionsMXM[n].datarelated!=="undefined"){for(var k=0;k<m.actionsMXM[n].datarelated.length;k++){if(m.actionsMXM[n].datarelated[k].type.toLowerCase()==="galeria"){s+='<div class="img_stage_01 not_here" style="display: none;">';
s+='<div class="img_stage_01_image"> <img src="'+m.actionsMXM[n].datarelated[k].url+'" alt="Image description"> </div>';if(typeof m.actionsMXM[n].datarelated[k].imagenTitulo!=="undefined"&&typeof m.actionsMXM[n].datarelated[k].imagenDesc!=="undefined"){s+=(m.actionsMXM[n].datarelated[k].imagenDesc!=="")?'<a class="img_stage_01_whtbkg" href="#"><p class="img_stage_01_black">'+m.actionsMXM[n].datarelated[k].imagenTitulo+"</p>":"";
s+=(m.actionsMXM[n].datarelated[k].imagenTitulo!=="")?'<p class="img_stage_01_gray">'+m.actionsMXM[n].datarelated[k].imagenDesc+"</p></a>":"";s+="</div>";
}}if(m.actionsMXM[n].datarelated[k].type.toLowerCase()==="video"){h+='<div class="vid_player_01 not_here" style="display: none;">';h+='<div class="vid_player_01_image">';
h+='<iframe width="100%" height="100%" src="" data-id="'+m.actionsMXM[n].datarelated[k].id+'" ></iframe>';h+='<div class="theaterContainer">';h+='<div class="theaterSideSpacer"></div>';
h+='<div class="theaterContainerVideo">';h+='<div class="videoLink"></div>';h+='<div class="contenedor"></div>';h+="</div>";h+='<div class="theaterSideSpacer"></div>';
h+="</div>";h+='<div class="companionBanner"></div>';h+="</div>";h+="</div>";}}}e+=(h!=="")?'<div class="icon-interactive textcolor-title4"> <i class="tvsa-videocamera"></i><i class="tvsa-error not-displayed"></i> </div>':"";
e+=(s!=="")?'<div class="icon-interactive2 dotted-right textcolor-title4"> <i class="tvsa-camera"></i> </div>':"";e+=s+h;e+="</li>";}b.find("#pintaAcciones").prepend(e);
$("li[data-id="+g+"]").slideDown("slow");}}).fail(function(){console.log("Error al actualizar: "+c.urlFinal);});}};(d.idjornada!==0&&d.idmatch!==0)?c.inicio():"";
};})(jQuery);