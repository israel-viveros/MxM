(function(){$.fn.wdgMxmLive=function(a){var d=$.extend({idjornada:0,idmatch:0,title:""},a);var b=this;var c={urlFinal:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+d.idjornada+"/"+d.idmatch+"/match_mxm.js",callback:"datamxmvivo",inicio:function(){Maquetado='<div class="wdg_mxm_live_04_title textcolor-title1">'+d.title+"</div>";
Maquetado+='<div class="wdg_mxm_live_04_status">';Maquetado+='<ul class="wdg_mxm_live_04_list" id="pintaAcciones"></ul>';Maquetado+="</div>";Maquetado+='<div class="see_less textcolor-title4">Ocultar</div>';
b.html(Maquetado);c.loadMaster();c.listener=setInterval(function(){console.log("buscando etiqueta actualizable..");var f=$("#timeUpdateMxM");if(f.length){console.log("ACTUALIZANDO CON ... "+f.text());
var e=parseInt(f.text());clearInterval(c.listener);if(e>0){setInterval(function(){c.updateMxm();},e);}}},5000);},loadMaster:function(){var f=Math.floor((1+Math.random())*65536).toString(16);
var e="",g="";$.ajax({url:c.urlFinal,type:"GET",dataType:"jsonp",jsonpCallback:c.callback,cache:false}).done(function(o){for(var j=0;j<o.actionsMXM.length;
j++){var n="",q="";switch(o.actionsMXM[j].type.toLowerCase()){case"amonestacion":clase="tvsa-mxm-yellowcard";break;case"segundaamonestacion":clase="tvsa-mxm-secondyellowcard";
break;case"expulsion":clase="tvsa-mxm-redcard";break;case"fueradelugar":clase="tvsa-mxm-offside";break;case"tirodeesquina":clase="tvsa-mxm-cornerkick";
break;case"iniciaelpartido":clase="tvsa-mxm-startfirsthalf";break;case"iniciasegundotiempo":clase="tvsa-mxm-startsecondhalf";break;case"-":clase="tvsa-mxm-startovertime";
break;case"iniciaprimertiempoextra":clase="tvsa-mxm-startextrafirsthalf";break;case"iniciasegundotiempoextra":clase="tvsa-mxm-startextrasecondhalf";break;
case"--":clase="tvsa-mxm-penalties";break;case"finalizaelpartido":clase="tvsa-mxm-gameend";break;case"pegaenelposte":clase="tvsa-mxm-crossbar";break;case"pasaporafuera":clase="tvsa-mxm-out";
break;case"penal":clase="tvsa-mxm-penaltykick";break;case"atajada":clase="tvsa-mxm-block";break;case"autogollocal":clase="tvsa-mxm-owngoal";break;case"autogolvisitante":clase="tvsa-mxm-owngoal";
break;case"gollocal":clase="tvsa-mxm-goal";break;case"golvisitante":clase="tvsa-mxm-goal";break;case"golpenallocal":clase="tvsa-mxm-goal";break;case"golpenalvisitante":clase="tvsa-mxm-goal";
break;case"falta":clase="tvsa-mxm-foul";break;case"comentario":clase="tvsa-mxm-comment";break;case"datoestadistico":clase="tvsa-mxm-statisticdata";break;
case"entraaljuego":clase="tvsa-mxm-playerin";break;case"saledeljuego":clase="tvsa-mxm-playerout";break;case"suspenciontemporaljuego":clase="tvsa-mxm-suspended";
break;case"lesion":clase="tvsa-mxm-lesion";break;case"terminasegundotiempo":clase="tvsa-mxm-gameend";break;case"terminaprimertiempo":clase="tvsa-mxm-gameend";
break;case"twitter":clase="twitter";break;default:clase="tvsa-"+o.actionsMXM[j].type.toLowerCase();break;}e+='<li data-id="'+f+'" style="display:none">';
e+=(clase==="twitter")?'<div class="time-icon twitter">':'<div class="time-icon">';e+='<div class="textcolor-title6 time">'+o.actionsMXM[j].minute+"'</div>";
if(clase==="twitter"){e+='<div class="icon-time"><i class="tvsa-twitter"></i></div>';}else{e+='<div class="icon-time"><i class="'+clase+'"></i></div>';
}e+="</div>";e+=(clase!=="twitter")?'<div class="chronic"><span>'+o.actionsMXM[j].description+"</span></div>":"";if(clase==="twitter"){var p=o.actionsMXM[j].description.replace(",","|");
var m=p.split("|");var k=m[0].split("@");e+='<div class="chronic">';e+='<p class="textcolor-title2">'+k[0]+'<span class="textcolor-title4">@'+k[1]+"</span></p>";
e+="<p>"+m[1]+"</p></div>";}if(typeof o.actionsMXM[j].datarelated!=="undefined"){for(var h=0;h<o.actionsMXM[j].datarelated.length;h++){if(o.actionsMXM[j].datarelated[h].type.toLowerCase()==="galeria"){q+='<div class="img_stage_01 not_here" style="display: none;">';
q+='<div class="img_stage_01_image"> <img src="'+o.actionsMXM[j].datarelated[h].url+'" alt="Image description"> </div>';if(typeof o.actionsMXM[j].datarelated[h].imagenTitulo!=="undefined"&&typeof o.actionsMXM[j].datarelated[h].imagenDesc!=="undefined"){q+=(o.actionsMXM[j].datarelated[h].imagenDesc!=="")?'<a class="img_stage_01_whtbkg" href="#"><p class="img_stage_01_black">'+o.actionsMXM[j].datarelated[h].imagenTitulo+"</p>":"";
q+=(o.actionsMXM[j].datarelated[h].imagenTitulo!=="")?'<p class="img_stage_01_gray">'+o.actionsMXM[j].datarelated[h].imagenDesc+"</p></a>":"";q+="</div>";
}}if(o.actionsMXM[j].datarelated[h].type.toLowerCase()==="video"){n+='<div class="vid_player_01 not_here" style="display: none;">';n+='<div class="vid_player_01_image">';
n+='<iframe width="100%" height="100%" src="" data-id="'+o.actionsMXM[j].datarelated[h].id+'" ></iframe>';n+='<div class="theaterContainer">';n+='<div class="theaterSideSpacer"></div>';
n+='<div class="theaterContainerVideo">';n+='<div class="videoLink"></div>';n+='<div class="contenedor"></div>';n+="</div>";n+='<div class="theaterSideSpacer"></div>';
n+="</div>";n+='<div class="companionBanner"></div>';n+="</div>";n+="</div>";}}}e+=(n!=="")?'<div class="icon-interactive textcolor-title4"> <i class="tvsa-videocamera"></i><i class="tvsa-error not-displayed"></i> </div>':"";
e+=(q!=="")?'<div class="icon-interactive2 dotted-right textcolor-title4"> <i class="tvsa-camera"></i> </div>':"";e+=q+n;e+="</li>";}b.find("#pintaAcciones").html(e);
$("[data-id="+f+"]").fadeIn("slow");c.funciones();}).fail(function(){console.log("error");});},funciones:function(){b.find(".tvsa-camera").live("click",function(e){e.preventDefault();
var f=$(this).parent().siblings(".img_stage_01");if(!$(this).hasClass("active")){$(".tvsa-camera").removeClass("active textcolor-title1 tvsa-error");$(this).addClass("active textcolor-title1 tvsa-error");
$(".img_stage_01").slideUp("slow");f.slideDown("slow",function(){});}else{$(this).removeClass("active textcolor-title1 tvsa-error");f.slideUp("slow");}});
b.find(".tvsa-videocamera").live("click",function(g){g.preventDefault();var h=$(this).parent().siblings(".vid_player_01.not_here");var f,e;if(!$(this).hasClass("active")){$(".tvsa-videocamera").removeClass("active textcolor-title1 tvsa-error");
$(this).addClass("active textcolor-title1 tvsa-error");$(".vid_player_01.not_here").slideUp("slow").find("iframe").attr({src:""});h.slideDown("slow",function(){e=parseInt($(this).outerWidth()*9/16);
$(this).height(e);$(this).find(".vid_player_01_image").height(e);f=$(this).find("iframe");f.attr({src:"http://tv.televisadeportes.esmas.com/embed/embed_ampp.php?id="+f.data("id")+"&w="+$(this).outerWidth()+"&h="+e+""});
});}else{$(this).removeClass("active textcolor-title1 tvsa-error");h.slideUp("slow",function(){f=$(this).find("iframe");f.attr({src:""});});}});},updateMxm:function(){var e="",f="";
$.ajax({url:c.urlFinal,type:"GET",dataType:"jsonp",jsonpCallback:c.callback,cache:false}).done(function(m){var g=Math.floor((1+Math.random())*65536).toString(16);
var q=b.find("#pintaAcciones").children("li").size();var t=m.actionsMXM.length;if(t>q){var o=t-q;for(var n=0;n<o;n++){var h="",s="";switch(m.actionsMXM[n].type.toLowerCase()){case"amonestacion":clase="tvsa-mxm-yellowcard";
break;case"segundaamonestacion":clase="tvsa-mxm-secondyellowcard";break;case"expulsion":clase="tvsa-mxm-redcard";break;case"fueradelugar":clase="tvsa-mxm-offside";
break;case"tirodeesquina":clase="tvsa-mxm-cornerkick";break;case"iniciaelpartido":clase="tvsa-mxm-startfirsthalf";break;case"iniciasegundotiempo":clase="tvsa-mxm-startsecondhalf";
break;case"-":clase="tvsa-mxm-startovertime";break;case"iniciaprimertiempoextra":clase="tvsa-mxm-startextrafirsthalf";break;case"iniciasegundotiempoextra":clase="tvsa-mxm-startextrasecondhalf";
break;case"--":clase="tvsa-mxm-penalties";break;case"finalizaelpartido":clase="tvsa-mxm-gameend";break;case"pegaenelposte":clase="tvsa-mxm-crossbar";break;
case"pasaporafuera":clase="tvsa-mxm-out";break;case"penal":clase="tvsa-mxm-penaltykick";break;case"atajada":clase="tvsa-mxm-block";break;case"autogollocal":clase="tvsa-mxm-owngoal";
break;case"autogolvisitante":clase="tvsa-mxm-owngoal";break;case"gollocal":clase="tvsa-mxm-goal";break;case"golvisitante":clase="tvsa-mxm-goal";break;case"golpenallocal":clase="tvsa-mxm-goal";
break;case"golpenalvisitante":clase="tvsa-mxm-goal";break;case"falta":clase="tvsa-mxm-foul";break;case"comentario":clase="tvsa-mxm-comment";break;case"datoestadistico":clase="tvsa-mxm-statisticdata";
break;case"entraaljuego":clase="tvsa-mxm-playerin";break;case"saledeljuego":clase="tvsa-mxm-playerout";break;case"suspenciontemporaljuego":clase="tvsa-mxm-suspended";
break;case"lesion":clase="tvsa-mxm-lesion";break;case"terminasegundotiempo":clase="tvsa-mxm-gameend";break;case"terminaprimertiempo":clase="tvsa-mxm-gameend";
break;case"twitter":clase="twitter";break;default:clase="tvsa-"+m.actionsMXM[n].type.toLowerCase();break;}e+='<li data-id="'+g+'" style="display:none">';
e+=(clase==="twitter")?'<div class="time-icon twitter">':'<div class="time-icon">';e+='<div class="textcolor-title6 time">'+m.actionsMXM[n].minute+"'</div>";
if(clase==="twitter"){e+='<div class="icon-time"><i class="tvsa-'+clase+'"></i></div>';}else{e+='<div class="icon-time"><i class="'+clase+'"></i></div>';
}e+="</div>";e+=(clase!=="twitter")?'<div class="chronic"><span>'+m.actionsMXM[n].description+"</span></div>":"";if(clase==="twitter"){var p=m.actionsMXM[n].description.replace(",","|");
var j=p.split("|");var r=j[0].split("@");e+='<div class="chronic">';e+='<p class="textcolor-title2">'+r[0]+'<span class="textcolor-title4">@'+r[1]+"</span></p>";
e+="<p>"+j[1]+"</p></div>";}if(typeof m.actionsMXM[n].datarelated!=="undefined"){for(var k=0;k<m.actionsMXM[n].datarelated.length;k++){if(m.actionsMXM[n].datarelated[k].type.toLowerCase()==="galeria"){s+='<div class="img_stage_01 not_here" style="display: none;">';
s+='<div class="img_stage_01_image"> <img src="'+m.actionsMXM[n].datarelated[k].url+'" alt="Image description"> </div>';if(typeof m.actionsMXM[n].datarelated[k].imagenTitulo!=="undefined"&&typeof m.actionsMXM[n].datarelated[k].imagenDesc!=="undefined"){s+=(m.actionsMXM[n].datarelated[k].imagenDesc!=="")?'<a class="img_stage_01_whtbkg" href="#"><p class="img_stage_01_black">'+m.actionsMXM[n].datarelated[k].imagenTitulo+"</p>":"";
s+=(m.actionsMXM[n].datarelated[k].imagenTitulo!=="")?'<p class="img_stage_01_gray">'+m.actionsMXM[n].datarelated[k].imagenDesc+"</p></a>":"";s+="</div>";
}}if(m.actionsMXM[n].datarelated[k].type.toLowerCase()==="video"){h+='<div class="vid_player_01 not_here" style="display: none;">';h+='<div class="vid_player_01_image">';
h+='<iframe width="100%" height="100%" src="" data-id="'+m.actionsMXM[n].datarelated[k].id+'" ></iframe>';h+='<div class="theaterContainer">';h+='<div class="theaterSideSpacer"></div>';
h+='<div class="theaterContainerVideo">';h+='<div class="videoLink"></div>';h+='<div class="contenedor"></div>';h+="</div>";h+='<div class="theaterSideSpacer"></div>';
h+="</div>";h+='<div class="companionBanner"></div>';h+="</div>";h+="</div>";}}}e+=(h!=="")?'<div class="icon-interactive textcolor-title4"> <i class="tvsa-videocamera"></i><i class="tvsa-error not-displayed"></i> </div>':"";
e+=(s!=="")?'<div class="icon-interactive2 dotted-right textcolor-title4"> <i class="tvsa-camera"></i> </div>':"";e+=s+h;e+="</li>";}b.find("#pintaAcciones").prepend(e);
$("li[data-id="+g+"]").slideDown("slow");}}).fail(function(){console.log("Error al actualizar: "+c.urlFinal);});}};(d.idjornada!==0&&d.idmatch!==0)?c.inicio():"";
};})(jQuery);