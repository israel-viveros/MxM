/*!
 * TIM Developer: Israel Viveros
 *   Version: 2.0.1
 *   Copyright: Televisa Interactive Media (2014)
 */
(function(){$.fn.wdgStrategyMxM=function(b){var c=$.extend({ideventomxm:0,ideventomxmtv:0,idclub:0,title:"",tema:"deportes"},b);
var a=this;var d={urlDropdown:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+c.ideventomxm+"/clubes/"+c.idclub+"/matchesclub.js",urlmxmheader:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+c.ideventomxm+"/"+c.ideventomxmtv+"/match_header.js",PintaCacha:function(e){var f="";
if(e==="dropdown"){f+='<div class="titulo textcolor-title4">'+c.title+"</div>";f+='<div class="pleca_inferior">';f+="<div>";f+="<strong>Partidos</strong>";
f+="</div>";f+='<div class="wdg_smex_strategy_01_dropdown">';f+='<div class="wdg_smex_strategy_01_dropdowncontent">';f+="<p></p>";f+='<div> <a id="dropdwon-right"  href="#" title="Link Description"> <i class="tvsa-caret-down"></i></a> </div>';
f+="</div>";f+='<div class="wdg_smex_strategy_01_listcontainer">';f+="</div>";f+="</div>";f+="</div>";}if(e==="alineacionFinal"){f+='<ul class="menu">';
f+='<li class="first active"><a href="#" data-query="inicial" class="ui-link">Alineación Inicial</a></li><li><a href="#" data-query="media" class="ui-link">Alineación Media</a></li><li><a href="#" data-query="final" class="ui-link">Alineación Final</a></li>';
f+="</ul>";}f+='<div class="field">';f+='<div id="LoadingCancha"><div id="fountainG_1" class="fountainG"></div><div id="fountainG_2" class="fountainG"></div><div id="fountainG_3" class="fountainG"></div><div id="fountainG_4" class="fountainG"></div><div id="fountainG_5" class="fountainG"></div><div id="fountainG_6" class="fountainG"></div><div id="fountainG_7" class="fountainG"></div><div id="fountainG_8" class="fountainG"></div></div>';
f+='<img class="cancha" src="http://i2.esmas.com/deportes30/copa-mundial-fifa-brasil-2014/Fase2yFase3/img/cancha.png" alt="field" width="624" height="334"/>';
f+='<span class="players">';f+="</span>";f+="</div>";a.html(f).css("display","none").fadeIn("slow",function(){$(this).css("display","block");});(c.idclub!==0)?setTimeout(function(){d.loadDropdown();
},1000):"";d.FunInicio();(e==="alineacionFinal")?d.botonesAlineacion():"";(c.ideventomxm!==0&&c.ideventomxmtv!==0&&c.idclub===0)?d.header():"";(c.tema!=="undefined")?$("head").append('<link rel="stylesheet" href="http://i2.esmas.com/deportes30/mxm/css/TIMwdg_smex_strategy.min.css">'):"";
},loadDropdown:function(){var e="";$.ajax({url:d.urlDropdown,dataType:"jsonp",jsonpCallback:"effectivenessByTeam",cache:false}).done(function(g){e+='<ul class="wdg_smex_strategy_01_dropdownlist">';
for(var f=0;f<g.efectividad.length;f++){e+='<li><p data-field="'+g.efectividad[f].matchid+'">'+g.efectividad[f].weekName+"</p></li>";}e+="</ul>";$(".wdg_smex_strategy_01_listcontainer").html(e);
var h=$(".wdg_smex_strategy_01_dropdownlist li").last().find("p").data("field");$(".wdg_smex_strategy_01_dropdowncontent p").text($(".wdg_smex_strategy_01_dropdownlist li").last().find("p").text());
d.loadAlineacion(a,h);}).fail(function(){console.log("error al cargar DROPDOWN: "+d.urlDropdown);});},loadAlineacion:function(g,h,f){var e=new Array();
g.find("span.players").fadeOut("fast");$.ajax({url:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+c.ideventomxm+"/"+h+"/match_lineup.js",dataType:"jsonp",jsonpCallback:"datagame",cache:false,success:function(J){var H="",A="",n=new Array(),q=new Array(),I=new Array(),z=new Array(),u=new Array();
var s=new Array();var o,p,j,k,F;s[0]="lineupLocal";s[1]="lineupVisit";q=J[s[0]].penalization;I=J[s[1]].penalization;z=J[s[0]].expelled;u=J[s[1]].expelled;
for(var w=0;w<s.length;w++){k=String(s[w]);e.push(J[k].average);for(var B=0;B<J[k].team.length;B++){var m=0;var l="";var y="";var v="",D="";p=parseInt(J[k].team[B].posx);
o=parseInt(J[k].team[B].posy);p=(isNaN(p))?0:p;o=(isNaN(o))?0:o;if(p<=290&&o<=140){l="grid1";}else{if(p<=290&&o>140){l="grid3";}else{if(p>290&&o<=140){l="grid2";
}else{l="grid4";}}}if(typeof J[k].team[B].actions!=="undefined"&&J[k].team[B].actions.length>0){v+='<em>acciones</em><span class="actions">';for(var G=0;
G<J[k].team[B].actions.length;G++){switch(J[k].team[B].actions[G].type.toLowerCase()){case"amonestacion":clase="tvsa-mxm-yellowcard";break;case"segundaamonestacion":clase="tvsa-mxm-secondyellowcard";
m=1;break;case"expulsion":clase="tvsa-mxm-redcard";m=1;break;case"fueradelugar":clase="tvsa-mxm-offside";break;case"tirodeesquina":clase="tvsa-mxm-cornerkick";
break;case"iniciaelpartido":clase="tvsa-mxm-startfirsthalf";break;case"iniciasegundotiempo":clase="tvsa-mxm-startsecondhalf";break;case"-":clase="tvsa-mxm-startovertime";
break;case"iniciaprimertiempoextra":clase="tvsa-mxm-startextrafirsthalf";break;case"iniciasegundotiempoextra":clase="tvsa-mxm-startextrasecondhalf";break;
case"--":clase="tvsa-mxm-penalties";break;case"finalizaelpartido":clase="tvsa-mxm-gameend";break;case"pegaenelposte":clase="tvsa-mxm-crossbar";break;case"pasaporafuera":clase="tvsa-mxm-out";
break;case"penal":clase="tvsa-mxm-penaltykick";break;case"atajada":clase="tvsa-mxm-block";break;case"autogollocal":clase="tvsa-mxm-owngoal";break;case"autogolvisitante":clase="tvsa-mxm-owngoal";
break;case"gollocal":clase="tvsa-mxm-goal";break;case"golvisitante":clase="tvsa-mxm-goal";break;case"golpenallocal":clase="tvsa-mxm-goal";break;case"golpenalvisitante":clase="tvsa-mxm-goal";
break;case"falta":clase="tvsa-mxm-foul";break;case"comentario":clase="tvsa-mxm-comment";break;case"datoestadistico":clase="tvsa-mxm-statisticdata";break;
case"entraaljuego":clase="tvsa-mxm-playerin";break;case"saledeljuego":clase="tvsa-mxm-playerout";break;case"suspenciontemporaljuego":clase="tvsa-mxm-suspended";
break;case"lesion":clase="tvsa-mxm-lesion";break;default:clase=J[k].team[B].actions[G].type.toLowerCase();break;}v+='<i class="'+clase+'"></i>'+J[k].team[B].actions[G].minute+"'";
}v+="</span>";}if(v===""){y+="noactions";}if(k==="lineupLocal"){j="local";}else{j="visit";}var E=(m==0)?"visible":"hidden";F=(J[k].team[B].image!=="")?J[k].team[B].image:"http://i2.esmas.com/img/spacer.gif";
H+='<span data-guid="'+J[k].team[B].idjugador+'" class="player '+j+" "+l+'" style="left:'+p+"px;top:"+o+"px;visibility:"+E+'"><a href="#" title="'+J[k].team[B].nickName+'"><span class="number textcolor-title2">'+J[k].team[B].number+'</span><span class="tooltip '+y+'"><img class="playerfoto" src="'+F+'" alt="'+J[k].team[B].nickName+'" width="51" height="38" /><span class="arrow"></span><span class="name">'+J[k].team[B].nickName+'</span><span class="position textcolor-title2">'+J[k].team[B].position+"</span>"+v+"</span></a></span>";
}g.find("span.players").html(H).fadeIn("slow",function(){$(this).css("display","block");});$("#LoadingCancha").hide("slow");$(".grid3 .noactions").css("top","-90px");
$(".grid4 .noactions").css("top","-90px");}if(f!=="Alineacionfinal"){for(var x=0;x<J.lineupVisit.substitutes.length;x++){if(typeof(J.lineupVisit.substitutes[x].actions)==="object"){for(var C=0;
C<J.lineupVisit.substitutes[x].actions.length;C++){if(J.lineupVisit.substitutes[x].actions[C].type==="entraAlJuego"){$("span[data-guid="+J.lineupVisit.substitutes[x].actions[C].playeridchange+"]").css({top:J.lineupVisit.substitutes[x].posy+"px",left:J.lineupVisit.substitutes[x].posx+"px"});
}}}}for(var x=0;x<J.lineupLocal.substitutes.length;x++){if(typeof(J.lineupLocal.substitutes[x].actions)==="object"){for(var C=0;C<J.lineupLocal.substitutes[x].actions.length;
C++){if(J.lineupLocal.substitutes[x].actions[C].type==="entraAlJuego"){$("span[data-guid="+J.lineupLocal.substitutes[x].actions[C].playeridchange+"]").css({top:J.lineupLocal.substitutes[x].posy+"px",left:J.lineupLocal.substitutes[x].posx+"px"});
}}}}}}}).fail(function(){$("#LoadingCancha").hide();});},FunInicio:function(){$("section.wdg_smex_strategy_01").each(function(){var g=(typeof exports==="undefined"?window:exports);
var h={check_mime_type:true};g.Retina=f;function f(){}f.configure=function(l){if(l===null){l={};}for(var m in l){h[m]=l[m];}};f.isRetina=function(){var l="(-webkit-min-device-pixel-ratio: 1.5),										   (min--moz-device-pixel-ratio: 1.5),										   (-o-min-device-pixel-ratio: 3/2),										   (min-resolution: 1.5dppx)";
if(g.devicePixelRatio>1){return true;}if(g.matchMedia&&g.matchMedia(l).matches){return true;}return false;};var i=$(this);if(f.isRetina()){var e=i.find("img.cancha").attr("src");
i.find("img.cancha").attr("src",e.replace(".png","@2x.png"));}if(c.ideventomxm!==0&&c.ideventomxmtv!==0){d.loadAlineacion(i,c.ideventomxmtv);}var i=$(".wdg_smex_strategy_01");
var k=i.find(".wdg_smex_strategy_01_dropdown");var j=$(".pleca_inferior .wdg_smex_strategy_01_dropdownlist li:first-child");$(".pleca_inferior .wdg_smex_strategy_01_dropdowncontent p").html(j.find("p").html());
k.bind("click","touchstart",function(m){m.preventDefault();var o=$(this).find(".wdg_smex_strategy_01_listcontainer").find(".wdg_smex_strategy_01_dropdownlist");
var p=$(this);var l=o.css("visibility");if(l==="hidden"){o.css({visibility:"visible",height:"auto","max-height":"180px","overflow-y":"scroll","overflow-x":"hidden"});
}else{o.css({visibility:"hidden",height:"0px"});}var n=$(".wdg_smex_strategy_01_dropdownlist li");n.unbind().bind("click",function(q){q.preventDefault();
$("#LoadingCancha").show();p.find(".wdg_smex_strategy_01_dropdowncontent p").html($(this).find("p").html());d.loadAlineacion(i,$(this).find("p").data("field"));
$(".wdg_smex_strategy_01 table tr td").removeClass();$(".wdg_smex_strategy_01 table tr td a").removeClass();$(".wdg_smex_strategy_01 table tr td").addClass("largo");
$(".wdg_smex_strategy_01 table tr td a").addClass("font_menu");var r=$(this).find("p").attr("data-field");$(".wdg_smex_strategy_01 .campo").hide();});});
});$("section.wdg_smex_strategy_01 .player a").live("mouseenter",function(e){e.preventDefault();$(this).children(".tooltip").css("display","block");});
$("section.wdg_smex_strategy_01 .player a").live("mouseleave",function(e){e.preventDefault();$(this).children(".tooltip").css("display","none");});if($(window).width()<948){$("section.wdg_smex_strategy_01 .player a").live("click","touchstart",function(e){e.preventDefault();
$wss1_status=$(this).children(".tooltip").css("display");if($wss1_status==="block"){$(this).children(".tooltip").css("display","none");}else{$(this).children(".tooltip").css("display","block");
}});$("section.wdg_smex_strategy_01 .player a > span").bind("touchstart",function(e){e.preventDefault();});}},};if(c.idclub!==0&&c.idclub!==0){d.PintaCacha("dropdown");
}else{if(c.ideventomxm!==0&&c.ideventomxmtv!==0){d.PintaCacha("alineacionFinal");}}};})(jQuery);