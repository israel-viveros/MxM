(function(){$.fn.wdg_avgfield=function(a){var c=$.extend({idTorneo:0,idMatch:0,title:""},a);var b=this;var d={urlFinal:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+c.idTorneo+"/"+c.idMatch+"/match_summary.js",loadMaster:function(){$.ajax({url:d.urlFinal,type:"jsonp",dataType:"jsonp",jsonpCallback:"summaryActions",cache:false}).done(function(e){d.pintar(e);
}).fail(function(){console.log("error al cargar el feed de summary actions");});},update:function(){$.ajax({url:d.urlFinal,type:"jsonp",dataType:"jsonp",jsonpCallback:"summaryActions",cache:false}).done(function(e){d.updateData(e);
}).fail(function(){console.log("error al cargar el feed de summary actions");});},updateData:function(m){var e=$("#LocalamarillasTIM").text(),q=$("#rojasLocalTIM").text(),h=$("#esquinaLocalTIM").text(),k=$("#tiroslocalTIM").text(),r=$("#VisitAmarillasTIM").text(),n=$("#rojasVisitTIM").text(),i=$("#esquinavisitTIM").text(),o=$("#tirosvisitLocal").text(),g=m.acciones.local.tarjeta_amarilla,j=m.acciones.local.tarjeta_roja,f=m.acciones.local.tiros_esquina,l=m.acciones.local.tiros_gol,p=m.acciones.visitant.tarjeta_amarilla;
feedvisitroja=m.acciones.visitant.tarjeta_roja,feedvisitesquina=m.acciones.visitant.tiros_esquina,feedvisitgol=m.acciones.visitant.tiros_gol;(e!==g)?$("#LocalamarillasTIM").text(g):"";
(q!==j)?$("#rojasLocalTIM").text(j):"";(h!==f)?$("#esquinaLocalTIM").text(f):"";(l!==l)?$("#tiroslocalTIM").text(l):"";(r!==p)?$("#LocalamarillasTIM").text(p):"";
(n!==feedvisitroja)?$("#LocalamarillasTIM").text(feedvisitroja):"";(i!==feedvisitesquina)?$("#LocalamarillasTIM").text(feedvisitesquina):"";(o!==feedvisitgol)?$("#LocalamarillasTIM").text(feedvisitgol):"";
},pintar:function(e){maquetado='<div class="wdg_avgfield_02" style="display:none;">';maquetado+='<div class="str_pleca_01 collapsable">';maquetado+='<div class="str_pleca_01_title">';
maquetado+='<h3 class="background-color-pleca1">';maquetado+='<a title="Link Description" class="textcolor-title3 ui-link">'+c.title+"</a></h3></div></div>";
maquetado+='<div class="wdg_avgfield_02_content">';maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="wdg_avgfield_02_red textcolor-title1 ui-link"></a></div>';
maquetado+='<div class="wdg_avgfield_02_teams">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+='<div class="element">';maquetado+=(typeof(e.acciones.local.logoch)!=="undefined")?'<img src="'+e.acciones.local.logoch+'" alt="'+e.acciones.local.equipo+'">':"";
maquetado+="</div>              ";maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+='<div class="wdg_avgfield_02_teamb">';maquetado+=(typeof(e.acciones.visitant.logoch)!=="undefined")?'<img src="'+e.acciones.visitant.logoch+'" alt="'+e.acciones.visitant.equipo+'">':"";
maquetado+="</div>";maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';
maquetado+='<a class="ui-link">Tarjetas Amarillas</a>';maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';
maquetado+=(typeof(e.acciones.local.tarjeta_amarilla)!=="undefined")?'<div class="element textcolor-title2" id="LocalamarillasTIM">'+e.acciones.local.tarjeta_amarilla+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(e.acciones.visitant.tarjeta_amarilla)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="VisitAmarillasTIM">'+e.acciones.visitant.tarjeta_amarilla+"</div>":"";
maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="ui-link">Tarjetas Rojas</a>';
maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+=(typeof(e.acciones.local.tarjeta_roja)!=="undefined")?'<div class="element textcolor-title2" id="rojasLocalTIM">'+e.acciones.local.tarjeta_roja+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(e.acciones.visitant.tarjeta_roja)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="rojasVisitTIM">'+e.acciones.visitant.tarjeta_roja+"</div>":"";
maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="ui-link">Tiros de Esquina</a>';
maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+=(typeof(e.acciones.local.tiros_esquina)!=="undefined")?'<div class="element textcolor-title2" id="esquinaLocalTIM">'+e.acciones.local.tiros_esquina+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(e.acciones.visitant.tiros_esquina)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="esquinavisitTIM">'+e.acciones.visitant.tiros_esquina+"</div> ":"";
maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="ui-link">Tiros de Gol</a>';
maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+=(typeof(e.acciones.local.tiros_gol)!=="undefined")?'<div class="element textcolor-title2" id="tiroslocalTIM">'+e.acciones.local.tiros_gol+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(e.acciones.visitant.tiros_gol)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="tirosvisitLocal">'+e.acciones.visitant.tiros_gol+"</div> ":"";
maquetado+="</div>";maquetado+="</div>";maquetado+="</div>";maquetado+="</div>";$(b).html(maquetado).children(".wdg_avgfield_02").fadeIn("slow",function(){$(this).css("display","block");
});d.listener=setInterval(function(){console.log("buscando etiqueta actualizable..");var g=$("#timeUpdateMxM");if(g.length){console.log("ACTUALIZANDO CON ... "+g.text());
var f=parseInt(g.text());clearInterval(d.listener);if(f>0){setInterval(function(){d.update();},f);}}},5000);}};if(c.idMatch!==0&&c.idTorneo!==0){d.loadMaster();
}else{console.log("falta el idMatch o idTorneo");}};})(jQuery);