(function(){$.fn.wdg_avgfield=function(a){var c=$.extend({idTorneo:0,idMatch:0,title:""},a);var b=this;var d={urlFinal:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+c.idTorneo+"/"+c.idMatch+"/match_summary.js",urlmxmheader:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+c.idTorneo+"/"+c.idMatch+"/match_header.js",loadMaster:function(){$.ajax({url:d.urlFinal,type:"jsonp",dataType:"jsonp",jsonpCallback:"summaryActions",cache:false}).done(function(e){d.pintar(e);
}).fail(function(){console.log("error al cargar el feed de summary actions");});},update:function(){console.log("update");$.ajax({url:d.urlFinal,type:"jsonp",dataType:"jsonp",jsonpCallback:"summaryActions",cache:false}).done(function(e){d.updateData(e);
}).fail(function(){console.log("error al cargar el feed de summary actions");});},updateData:function(m){console.log(m);var e=$("#LocalamarillasTIM").text(),q=$("#rojasLocalTIM").text(),h=$("#esquinaLocalTIM").text(),k=$("#tiroslocalTIM").text(),r=$("#VisitAmarillasTIM").text(),n=$("#rojasVisitTIM").text(),i=$("#esquinavisitTIM").text(),o=$("#tirosvisitLocal").text(),g=m.acciones.local.tarjeta_amarilla,j=m.acciones.local.tarjeta_roja,f=m.acciones.local.tiros_esquina,l=m.acciones.local.tiros_gol,p=m.acciones.visitant.tarjeta_amarilla;
feedvisitroja=m.acciones.visitant.tarjeta_roja,feedvisitesquina=m.acciones.visitant.tiros_esquina,feedvisitgol=m.acciones.visitant.tiros_gol;(e!==g)?$("#LocalamarillasTIM").text(g):"";
(q!==j)?$("#rojasLocalTIM").text(j):"";(h!==f)?$("#esquinaLocalTIM").text(f):"";(l!==l)?$("#tiroslocalTIM").text(l):"";(r!==p)?$("#LocalamarillasTIM").text(p):"";
(n!==feedvisitroja)?$("#LocalamarillasTIM").text(feedvisitroja):"";(i!==feedvisitesquina)?$("#LocalamarillasTIM").text(feedvisitesquina):"";(o!==feedvisitgol)?$("#LocalamarillasTIM").text(feedvisitgol):"";
},pintar:function(e){maquetado='<div class="wdg_avgfield_02" style="display:none;">';maquetado+='<div class="str_pleca_01 collapsable">';maquetado+='<div class="str_pleca_01_title">';
maquetado+='<h3 class="background-color-pleca1">';maquetado+='<a title="Link Description" class="textcolor-title3 ui-link">'+c.title+"</a></h3></div></div>";
maquetado+='<div class="wdg_avgfield_02_content">';maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="wdg_avgfield_02_red textcolor-title1 ui-link"></a></div>';
maquetado+='<div class="wdg_avgfield_02_teams">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+='<div class="element">';maquetado+=(typeof(e.acciones.local.logoch)!=="undefined")?'<img src="'+e.acciones.local.logoch+'" alt="'+e.acciones.local.equipo+'">':"";
maquetado+="</div>              ";maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+='<div class="wdg_avgfield_02_teamb">';maquetado+=(typeof(e.acciones.visitant.logoch)!=="undefined")?'<img src="'+e.acciones.visitant.logoch+'" alt="'+e.acciones.visitant.equipo+'">':"";
maquetado+="</div>";maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';
maquetado+='<a class="ui-link">Tarjetas Amarillas</a>';maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';
maquetado+=(typeof(e.acciones.local.tarjeta_amarilla)!=="undefined")?'<div class="element textcolor-title2" id="LocalamarillasTIM">'+e.acciones.local.tarjeta_amarilla+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(e.acciones.visitant.tarjeta_amarilla)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="VisitAmarillasTIM">'+e.acciones.visitant.tarjeta_amarilla+"</div>":"";
maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="ui-link">Tarjetas Rojas</a>';
maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+=(typeof(e.acciones.local.tarjeta_roja)!=="undefined")?'<div class="element textcolor-title2" id="rojasLocalTIM">'+e.acciones.local.tarjeta_roja+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(e.acciones.visitant.tarjeta_roja)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="rojasVisitTIM">'+e.acciones.visitant.tarjeta_roja+"</div>":"";
maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="ui-link">Tiros de Esquina</a>';
maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+=(typeof(e.acciones.local.tiros_esquina)!=="undefined")?'<div class="element textcolor-title2" id="esquinaLocalTIM">'+e.acciones.local.tiros_esquina+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(e.acciones.visitant.tiros_esquina)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="esquinavisitTIM">'+e.acciones.visitant.tiros_esquina+"</div> ":"";
maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="ui-link">Tiros de Gol</a>';
maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+=(typeof(e.acciones.local.tiros_gol)!=="undefined")?'<div class="element textcolor-title2" id="tiroslocalTIM">'+e.acciones.local.tiros_gol+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(e.acciones.visitant.tiros_gol)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="tirosvisitLocal">'+e.acciones.visitant.tiros_gol+"</div> ":"";
maquetado+="</div>";maquetado+="</div>";maquetado+="</div>";maquetado+="</div>";$(b).html(maquetado).children(".wdg_avgfield_02").fadeIn("slow",function(){$(this).css("display","block");
});d.header();},header:function(){$.ajax({url:d.urlmxmheader,jsonpCallback:"mxmheader",type:"GET",dataType:"jsonp"}).done(function(e){console.log(e);d.timeUpdate(e.fechaPartido,e.horaPartido);
}).fail(function(){console.log("Error al cargar el header "+d.urlmxmheader);});},timeUpdate:function(h,e){var f=0;var g=h.substring(3,5)+"-"+h.substring(0,2)+"-"+h.substring(8,10)+" "+e.substring(0,5)+":00";
$.ajax({url:"http://mxm.televisadeportes.esmas.com/deportes/home/timetvjsonp.js",async:false,cache:false,dataType:"jsonp",jsonpCallback:"timetv",success:function(o){var q="";
var l=0;var k=0;horas=o.timetv;q=o.fechatv.replace(/_/gi,"-").split("-");l=parseInt(q[1])+1;if(String(l).length==1){l="0"+l;}k=parseInt(q[2])+1900;fechas=l+"-"+q[0]+"-"+k;
fechas=fechas+" "+horas+":00";var u=new Date(g);var t=new Date(fechas);var p=Date.UTC(u.getFullYear(),u.getMonth()+1,u.getDate());var n=Date.UTC(t.getFullYear(),t.getMonth()+1,t.getDate());
if(parseFloat(p)<parseFloat(n)){}else{if(parseFloat(p)==parseFloat(n)){f=60000;var j=parseInt(t.getHours()-u.getHours());if(t.getHours()>=u.getHours()){f=60000;
}else{var s=u.getHours();var r=t.getHours();var w=u.getMinutes();var v=t.getMinutes();var i=(((s-r)*60)+w)-v;if(i<=15){f=60000;}else{(i<60)?f=900000:"";
}}}else{if(parseFloat(p)>parseFloat(n)){}else{}}}if(f!==0){setInterval(function(){d.update();},f);}}});},};if(c.idMatch!==0&&c.idTorneo!==0){d.loadMaster();
}else{console.log("falta el idMatch o idTorneo");}};})(jQuery);