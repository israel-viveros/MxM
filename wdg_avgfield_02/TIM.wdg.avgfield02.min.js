/*!
 *   TIM Developer: Israel Viveros
 *   Version: 2.0.3
 *   Copyright: Televisa Interactive Media (2014)
 */
(function(){$.fn.wdg_avgfield=function(b){var d=$.extend({idTorneo:0,idMatch:0,title:""},b);
var c=this;var a=null;var e={urlFinal:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+d.idTorneo+"/"+d.idMatch+"/match_summary.js",tmpescuchaListener:0,loadMaster:function(){$.ajax({url:e.urlFinal,type:"jsonp",dataType:"jsonp",jsonpCallback:"summaryActions",cache:false}).done(function(f){e.pintar(f);
}).fail(function(){console.log("error al cargar el feed de summary actions");});},update:function(){$.ajax({url:e.urlFinal,type:"jsonp",dataType:"jsonp",jsonpCallback:"summaryActions",cache:false}).done(function(f){e.updateData(f);
}).fail(function(){console.log("error al cargar el feed de summary actions");});},updateData:function(q){var f=parseInt($("#LocalamarillasTIM").text()),u=parseInt($("#rojasLocalTIM").text()),i=parseInt($("#esquinaLocalTIM").text()),o=parseInt($("#tiroslocalTIM").text()),v=parseInt($("#VisitAmarillasTIM").text()),r=parseInt($("#rojasVisitTIM").text()),k=parseInt($("#esquinavisitTIM").text()),s=parseInt($("#tirosvisitLocal").text()),h=parseInt(q.acciones.local.tarjeta_amarilla),n=parseInt(q.acciones.local.tarjeta_roja),g=parseInt(q.acciones.local.tiros_esquina),p=parseInt(q.acciones.local.tiros_gol),t=parseInt(q.acciones.visitant.tarjeta_amarilla),m=parseInt(q.acciones.visitant.tarjeta_roja),j=parseInt(q.acciones.visitant.tiros_esquina),l=parseInt(q.acciones.visitant.tiros_gol);
(f!==h)?$("#LocalamarillasTIM").html(h):"";(u!==n)?$("#rojasLocalTIM").html(n):"";(i!==g)?$("#esquinaLocalTIM").html(g):"";(o!==p)?$("#tiroslocalTIM").html(p):"";
(v!==t)?$("#VisitAmarillasTIM").html(t):"";(r!==m)?$("#rojasVisitTIM").html(m):"";(k!==j)?$("#esquinavisitTIM").html(j):"";(s!==l)?$("#tirosvisitLocal").html(l):"";
},pintar:function(f){maquetado='<div class="wdg_avgfield_02" style="display:none;">';maquetado+='<div class="str_pleca_01 collapsable">';maquetado+='<div class="str_pleca_01_title">';
maquetado+='<h3 class="background-color-pleca1">';maquetado+='<a title="Link Description" class="textcolor-title3 ui-link">'+d.title+"</a></h3></div></div>";
maquetado+='<div class="wdg_avgfield_02_content">';maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="wdg_avgfield_02_red textcolor-title1 ui-link"></a></div>';
maquetado+='<div class="wdg_avgfield_02_teams">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+='<div class="element" id="avgTIMLocal">';maquetado+="</div>              ";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+='<div class="wdg_avgfield_02_teamb" id="avgTIMVisit">';maquetado+="</div>";
maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="ui-link">Tarjetas Amarillas</a>';
maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+=(typeof(f.acciones.local.tarjeta_amarilla)!=="undefined")?'<div class="element textcolor-title2" id="LocalamarillasTIM">'+f.acciones.local.tarjeta_amarilla+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(f.acciones.visitant.tarjeta_amarilla)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="VisitAmarillasTIM">'+f.acciones.visitant.tarjeta_amarilla+"</div>":"";
maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="ui-link">Tarjetas Rojas</a>';
maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+=(typeof(f.acciones.local.tarjeta_roja)!=="undefined")?'<div class="element textcolor-title2" id="rojasLocalTIM">'+f.acciones.local.tarjeta_roja+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(f.acciones.visitant.tarjeta_roja)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="rojasVisitTIM">'+f.acciones.visitant.tarjeta_roja+"</div>":"";
maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="ui-link">Tiros de Esquina</a>';
maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+=(typeof(f.acciones.local.tiros_esquina)!=="undefined")?'<div class="element textcolor-title2" id="esquinaLocalTIM">'+f.acciones.local.tiros_esquina+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(f.acciones.visitant.tiros_esquina)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="esquinavisitTIM">'+f.acciones.visitant.tiros_esquina+"</div> ":"";
maquetado+="</div>";maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_row">';maquetado+='<div class="wdg_avgfield_02_title">';maquetado+='<a class="ui-link">Tiros de Gol</a>';
maquetado+="</div>";maquetado+='<div class="wdg_avgfield_02_teams box-gray">';maquetado+='<div class="wdg_avgfield_02_teama">';maquetado+=(typeof(f.acciones.local.tiros_gol)!=="undefined")?'<div class="element textcolor-title2" id="tiroslocalTIM">'+f.acciones.local.tiros_gol+"</div>":"";
maquetado+="</div>";maquetado+='<div class="dotted-right"></div>';maquetado+=(typeof(f.acciones.visitant.tiros_gol)!=="undefined")?'<div class="wdg_avgfield_02_teamb textcolor-title2" id="tirosvisitLocal">'+f.acciones.visitant.tiros_gol+"</div> ":"";
maquetado+="</div>";maquetado+="</div>";maquetado+="</div>";maquetado+="</div>";$(c).html(maquetado).children(".wdg_avgfield_02").fadeIn("slow",function(){$(this).css("display","block");
});setTimeout(function(){if($("#avgTIMLocal").length){var g='<img class="linkbanderalocal" src="'+$("#localImgTIM").text()+'" width="28" height="28">';
var h='<img class="linkbanderavisit" src="'+$("#visitImgTIM").text()+'" width="28" height="28">';$("#avgTIMLocal").html(g);$("#avgTIMVisit").html(h);}},5000);
e.listener=setInterval(function(){console.log("buscando etiqueta actualizable..");var h=$("#timeUpdateMxM");if($("#avgTIMLocal").length){var i='<img class="linkbanderalocal" src="'+$("#localImgTIM").text()+'" width="28" height="28">';
var j='<img class="linkbanderavisit" src="'+$("#visitImgTIM").text()+'" width="28" height="28">';$("#avgTIMLocal").html(i);$("#avgTIMVisit").html(j);}console.log(h);
if(h.length){console.log("Antes: "+e.tmpescuchaListener);console.log("Ahora: "+h.text());var g=parseInt(h.text());if(g>0&&parseInt(h.text())!==parseInt(e.tmpescuchaListener)){console.log("ACTUALIZANDO CON ... "+h.text());
e.tmpescuchaListener=parseInt(h.text());clearInterval(a);a=setInterval(function(){e.update();},g);}}},60000);}};if(d.idMatch!==0&&d.idTorneo!==0){e.loadMaster();
}else{console.log("falta el idMatch o idTorneo");}};})(jQuery);