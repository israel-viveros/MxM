(function(){$.fn.WdgSportResult=function(b){var c=$.extend({idtorneo:0,idteam:0,tema:"deportes"},b);var a=this;var d={urlFinalHeader:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+c.idtorneo+"/"+c.idteam+"/match_header.js",IdPestanasMenu:$("#TIMnav_smnu_sports"),loadInfo:function(e){$.ajax({url:d.urlFinalHeader,type:"GET",dataType:"jsonp",jsonpCallback:"mxmheader",cache:false,async:false}).done(function(f){(e==="update")?d.updateGoles(f):d.drawHeader(f);
}).fail(function(f){console.log("Error al cargar: "+d.urlFinalHeader);console.log(f);a.hide();});},drawHeader:function(f){var e="";e+='<div class="wrapper"><div class="match_title">';
e+='<span class="hidden" id="datosTIMHeader"><span id="timeUpdateMxM">0</span> <span id="localAbrevTIM" class="hidden">'+f.equipoLocal.abrev+'</span> <span id="visitAbrevTIM" class="hidden">'+f.equipoVisitante.abrev+'</span> <span id="localImgTIM" class="hidden">'+f.equipoLocal.smallImage+'</span> <span id="visitImgTIM" class="hidden">'+f.equipoVisitante.smallImage+'</span> <span id="localGolesTIM" class="hidden">'+f.equipoVisitante.goles+'</span> <span id="visitGolesTIM" class="hidden">'+f.equipoVisitante.goles+"</span>  </span>";
e+='<div class="cup_name">';e+=(f.transmisionVivo!="")?'<div class="live-container textcolor-title3 background-color2 hidden" id="TIMVivoHeader" onclick="javascript:window.open(\''+f.transmisionVivo+'\');" style="cursor:pointer"><div class="icon-video"><i class="tvsa-videocamera"></i></div><div class="see-now">VER AHORA</div><div class="online">EN VIVO</div></div>':"";
e+='<div class="titulo textcolor-title3">'+f.torneo.nombre+"</div>";e+='<div class="subtitulo textcolor-title2">'+f.jornada.nombre+"</div>";e+="</div>";
e+="</div>";e+='<div class="live_time textcolor-title3 background-color1"><span>'+f.tiempo.replace(/'/g,"'")+"</span></div>";e+='<div class="leftside">';
e+=(c.tema=="mundial")?'<div class="padre">':"";e+='<div class="team1">';e+='<div class="escudo"><img src="'+f.equipoLocal.lineupImage+'" alt="'+f.equipoLocal.nombre+'" width="48" height="48"></div>';
e+='<div class="equipo"><span>'+f.equipoLocal.nombre+"</span></div>";e+='<div class="score">'+f.equipoLocal.goles+"</div>";e+=(f.equipoLocal.penales===""||parseInt(f.equipoLocal.penales)===0)?'<div class="penales" style="visibility:hidden"><span class="penal"></span> PENALES</div>':'<div class="penales"><span class="penal">'+f.equipoLocal.penales+"</span> PENALES</div>";
e+="</div>";e+='<div class="dotted_separator"></div>';e+='<div class="team2">';e+=(f.equipoVisitante.penales===""||parseInt(f.equipoVisitante.penales)===0)?'<div class="penales" style="visibility:hidden"><span class="penal"></span> PENALES</div>':'<div class="penales"><span class="penal">'+f.equipoVisitante.penales+"</span> PENALES2</div>";
e+='<div class="score">'+f.equipoVisitante.goles+"</div>";e+='<div class="equipo"><span>'+f.equipoVisitante.nombre+"</span></div>";e+='<div class="escudo"><img src="'+f.equipoVisitante.lineupImage+'" width="48" height="48" alt="'+f.equipoVisitante.nombre+'"></div>';
e+="</div>";e+='<div class="team2_m">';e+=(f.equipoVisitante.lineupImage!=="")?'<div class="escudo"><img src="'+f.equipoVisitante.lineupImage+'" width="48" height="48" alt="'+f.equipoVisitante.nombre+'"></div>':"";
e+='<div class="equipo"><span>'+f.equipoVisitante.nombre+"</span></div>";e+='<div class="score">'+f.equipoVisitante.goles+"</div>";e+=(f.equipoVisitante.penales===""||parseInt(f.equipoVisitante.penales)===0)?'<div class="penales" style="visibility:hidden"><span class="penal"></span> PENALES</div>':'<div class="penales"><span class="penal">'+f.equipoVisitante.penales+"</span> PENALES</div>";
e+="</div>";e+=(c.tema!=="mundial")?'<div class="solid_separator"></div>':"";e+='<div class="match_info">';e+=(typeof f.partidoIda!=="undefined")?'<div class="ida">Partido ida: <span class="blanco">'+f.partidoIda.local+" "+f.partidoIda.golesLocal+" - "+f.partidoIda.golesVisitante+" "+f.partidoIda.visitante+"</span></div>":"";
if(parseInt(f.equipoLocal.golesGlobal)!==0||parseInt(f.equipoVisitante.golesGlobal)!==0){e+='<div class="scoreglobal">Global: <span class="blanco">'+f.equipoLocal.nombre+' <span id="globalLoc">'+f.equipoLocal.golesGlobal+'</span> - <span id="globalVi">'+f.equipoVisitante.golesGlobal+"</span> "+f.equipoVisitante.nombre+"</span></div>";
}e+="</div>";e+="</div>";e+=(c.tema==="mundial")?'<div class="solid_separator"></div></div>':"";e+='<div class="date_venue">';e+='<div class="when">'+f.fechaPartidoLetra.replace(/-/g," ")+" <span>"+f.horaPartido+"</span></div>";
e+=(typeof f.estadio!=="undefined")?'<div class="where">Estadio '+f.estadio.nombre+"<br>"+f.estadio.ciudad+", "+f.estadio.pais+"</div>":"";e+=(typeof f.datocurioso!=="undefined")?'<div class="info">'+f.datocurioso+"</div>":"";
e+="</div>";e+="</div>";a.css("display","none").html(e).slideDown("slow",function(){$(this).css({display:"block"});});if(f.tiempo.toLowerCase()!=="final"){setTimeout(function(){d.timeUpdate(f.fechaPartido,f.horaPartido);
},300);}(typeof f.paginas!=="undefined"&&d.IdPestanasMenu.length)?d.drawMenu(f.paginas):d.IdPestanasMenu.hide();},updateGoles:function(j){var g="",g="",h="",l="",m="",p="",s="",i="",e="",k="",f="",r="",q="",o="",n="";
var g=String(j.equipoLocal.goles),h=String(j.equipoVisitante.goles),l=String(j.equipoLocal.penales),m=String(j.equipoVisitante.penales),k=String(j.tiempo),n=String(j.equipoLocal.golesGlobal),q=String(j.equipoVisitante.golesGlobal);
p=$(".team1 .score").text(),s=$(".team2 .score").text(),i=$(".team1 .penal").text(),e=$(".team2 .penal").text(),f=$(".live_time").text(),o=$("#globalLoc").text(),r=$("#globalVi").text();
(g!==String(p))?d.nuevoValor($(".team1 .score"),g):"";(h!==String(s))?d.nuevoValor($(".team2 .score, .team2_m .score"),h):"";(i!==String(l)&&parseInt(l)>0)?d.nuevoValor($(".team1 .penal"),l):"";
(e!==String(m)&&parseInt(m)>0)?d.nuevoValor($(".team2 .penal,.team2_m .penal"),m):"";(k!==String(f))?d.nuevoValor($(".live_time span"),k):"";(n!==String(o))?d.nuevoValor($("#globalLoc"),n):"";
(q!==String(r))?d.nuevoValor($("#globalVi"),q):"";},nuevoValor:function(e,f){e.parent(".penales").css("visibility","visible");e.fadeOut("slow",function(){$(this).empty();
$(this).text(f).slideDown("fast");});},timeUpdate:function(i,f){console.log("Metod -> timeUpdate");var e=$("#TIMVivoHeader");var g=0;var h="20"+i.substring(8,10)+"/"+i.substring(3,5)+"/"+i.substring(0,2)+" "+f.substring(0,5)+":00";
$.ajax({url:"http://mxm.televisadeportes.esmas.com/deportes/home/timetvjsonp.js",async:false,cache:false,dataType:"jsonp",jsonpCallback:"timetv",success:function(p){var r="";
var n=0;var l=0;horas=p.timetv;r=p.fechatv.replace(/_/gi,"-").split("-");n=parseInt(r[1])+1;if(String(n).length==1){n="0"+n;}l=parseInt(r[2])+1900;fechas=l+"/"+n+"/"+r[0];
fechas=fechas+" "+horas+":00";var v=new Date(h);var u=new Date(fechas);var q=Date.UTC(v.getFullYear(),v.getMonth()+1,v.getDate());var o=Date.UTC(u.getFullYear(),u.getMonth()+1,u.getDate());
if(parseFloat(q)<parseFloat(o)){console.log("Fecha Menor");}else{if(parseFloat(q)==parseFloat(o)){console.log("Dia del Evento");g=300000;var k=parseInt(u.getHours()-v.getHours());
if(u.getHours()>=v.getHours()){console.log("Hora mayor del partido partido");g=30000;}else{var t=v.getHours();var s=u.getHours();var x=v.getMinutes();var w=u.getMinutes();
var j=(((t-s)*60)+x)-w;if(j<=15){console.log("faltan menos de 15 min");g=300000;if(e.length){e.removeClass("hidden");}}else{console.log("faltan mas de 15 pero menos de 1hr "+j);
a.find(".score").css("visibility","hidden");(j>60)?g=900000:"";if(e.length){e.removeClass("hidden");}}}}else{if(parseFloat(q)>parseFloat(o)){console.log("Fecha Mayor");
a.find(".score").css("visibility","hidden");}else{console.log("Error no actualizo");}}}$("#timeUpdateMxM").text(g);console.log("tiempo de actualizacion: "+g);
if(g!==0){setInterval(function(){d.loadInfo("update");},g);}}});},drawMenu:function(g){var f="";f+='<div class="navarrowleft">';f+='<a class="wdg_matchesresult_navleft" href="#left"> ';
f+='<span class="navlefticon"><i class="tvsa-double-caret-left inactive"></i></span></a></div>';f+='<div class="container">';f+='<div class="nav_smnu_sports_01_bar"><ul>';
f+=(typeof g.previo!=="undefined"&&g.previo!=="")?'<li class="previoMenuTim"> <a href="'+g.previo+'" target="_parent">Previo</a></li>':"";f+=(typeof g.alineacion!=="undefined"&&g.alineacion!=="")?'<li class="nav_smnu_sports_01_block alineacionMenuTim"><a href="'+g.alineacion+'" target="_parent" title="Alineaci\u00F3n">Alineaci\u00F3n</a></li>':"";
f+=(typeof g.rating!=="undefined"&&g.rating!==""&&c.tema!=="mundial")?'<li class="hide1 ratingMenuTim"><a href="'+g.rating+'" title="Rating">Rating</a></li>':"";
f+=(typeof g.mxm!=="undefined"&&g.mxm!=="")?'<li class="nav_smnu_sports_01_block nav_smnu_sports_01_block2 mxmMenuTim"><a href="'+g.mxm+'" target="_parent" title="MxM">MxM</a></li>':"";
f+=(typeof g.pizarra!=="undefined"&&g.pizarra!==""&&c.tema!=="mundial")?'<li class="hide2 pizarraMenuTim"><a href="'+g.pizarra+'" title="Pizarra">Pizarra</a></li>':"";
f+=(typeof g.cronica!=="undefined"&&g.cronica!=="")?'<li class="nav_smnu_sports_01_block nav_smnu_sports_01_block2 cronicaMenuTim"><a href="'+g.cronica+'" target="_parent" title="Cr\u00F3nica">Cr\u00F3nica</a></li>':"";
f+=(typeof g.video!=="undefined"&&g.video!=="")?'<li class="last nav_smnu_sports_01_block videoMenuTim"><a href="'+g.video+'" title="Video" target="_parent">Video</a></li>':"";
f+=(c.tema==="mundial")?'<li class="last nav_smnu_sports_01_block interaMenuTim"><a href="interacciontd.html" title="interacci\u00F3n TD" target="_parent">Interacci\u00F3n TD</a></li>':"";
f+="</ul></div></div>";f+='<div class="navarrowright"><a class="wdg_matchesresult_navright" href="#right">';f+='<span class="navrighticon"><i class="tvsa-double-caret-right active"></i></span></a></div>';
d.IdPestanasMenu.html(f).show();var e=document.URL;(/previo.html/.test(e))?$(".previoMenuTim").addClass("current"):"";(/previo_m.html/.test(e))?$(".previoMenuTim").addClass("current"):"";
(/alineacion.html/.test(e))?$(".alineacionMenuTim").addClass("current"):"";(/alineacion_m.html/.test(e))?$(".alineacionMenuTim").addClass("current"):"";
(/rating.html/.test(e))?$(".ratingMenuTim").addClass("current"):"";(/mxm.html/.test(e))?$(".mxmMenuTim").addClass("current"):"";(/mxm_m.html/.test(e))?$(".mxmMenuTim").addClass("current"):"";
(/pizarra.html/.test(e))?$(".pizarraMenuTim").addClass("current"):"";(/cronica.html/.test(e))?$(".cronicaMenuTim").addClass("current"):"";(/cronica_m.html/.test(e))?$(".cronicaMenuTim").addClass("current"):"";
(/video.html/.test(e))?$(".videoMenuTim").addClass("current"):"";(/interacciontd.html/.test(e))?$(".interaMenuTim").addClass("current"):"";}};(c.idtorneo!=0&&c.idteam!==0)?d.loadInfo():(console.log("---->Faltan los Id's de team y/o torneo"));
};})(jQuery);