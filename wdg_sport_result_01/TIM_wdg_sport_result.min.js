(function(){$.fn.WdgSportResult=function(b){var c=$.extend({idtorneo:0,idteam:0},b);var a=this;var d={urlFinalHeader:"http://lab.israelviveros.com/deportes/wdg_sport_result_01/"+c.idtorneo+"/"+c.idteam+"/mxm_header.js",jsonpcallback:"mxmheader",IdPestanasMenu:$("#TIMnav_smnu_sports"),loadInfo:function(e){$.ajax({url:d.urlFinalHeader,type:"GET",dataType:"jsonp",jsonpCallback:d.jsonpcallback,cache:false}).done(function(f){(e==="update")?d.updateGoles(f):d.drawHeader(f);
}).fail(function(){console.log("---->Error al cargar: "+d.urlFinalHeader);a.remove();});},drawHeader:function(f){var e="";e+='<div class="wrapper">';e+='<div class="match_title">';
e+='<div class="cup_name">';e+=(f.transimisionVivo!="")?'<div class="live-container textcolor-title3 background-color2" onclick="javascript:window.open(\''+f.transimisionVivo+'\');" style="cursor:pointer"><div class="icon-video"><i class="tvsa-videocamera"></i></div><div class="see-now">VER AHORA</div><div class="online">EN VIVO</div></div>':"";
e+='<div class="titulo textcolor-title3">'+f.torneo.nombre+"</div>";e+='<div class="subtitulo textcolor-title2">'+f.jornada.nombre+"</div>";e+="</div>";
e+='<div class="realtedimg">';e+='<img src="http://placehold.it/300x50" alt="">';e+="</div>";e+="</div>";e+='<div class="live_time textcolor-title3 background-color1">'+f.tiempo.replace(/'/g,"'")+"</div>";
e+='<div class="leftside">';e+='<div class="team1">';e+='<div class="escudo"><img src="'+f.equipoLocal.logo+'" alt="'+f.equipoLocal.nombre+'" width="48" height="48"></div>';
e+='<div class="equipo">'+f.equipoLocal.nombre+"</div>";e+='<div class="score">'+f.equipoLocal.goles+"</div>";e+=(f.equipoLocal.penales==="")?'<div class="penales" style="visibility:hidden"><span class="penal"></span> PENALES</div>':'<div class="penales"><span class="penal">'+f.equipoLocal.penales+"</span> PENALES</div>";
e+="</div>";e+='<div class="dotted_separator"></div>';e+='<div class="team2">';e+=(f.equipoVisitante.penales==="")?'<div class="penales" style="visibility:hidden"><span class="penal"></span> PENALES</div>':'<div class="penales"><span class="penal">'+f.equipoVisitante.penales+"</span> PENALES</div>";
e+='<div class="score">'+f.equipoVisitante.goles+"</div>";e+='<div class="equipo">'+f.equipoVisitante.nombre+"</div>";e+='<div class="escudo"><img src="'+f.equipoVisitante.logo+'" width="48" height="48" alt="'+f.equipoVisitante.nombre+'"></div>';
e+="</div>";e+='<div class="team2_m">';e+=(f.equipoVisitante.logo!=="")?'<div class="escudo"><img src="'+f.equipoVisitante.logo+'" width="48" height="48" alt="'+f.equipoVisitante.nombre+'"></div>':"";
e+='<div class="equipo">'+f.equipoVisitante.nombre+"</div>";e+='<div class="score">'+f.equipoVisitante.goles+"</div>";e+=(f.equipoVisitante.penales==="")?'<div class="penales" style="visibility:hidden"><span class="penal"></span> PENALES</div>':'<div class="penales"><span class="penal">'+f.equipoVisitante.penales+"</span> PENALES</div>";
e+="</div>";e+='<div class="solid_separator"></div>';e+='<div class="match_info">';e+=(typeof f.partidoIda!=="undefined")?'<div class="ida">Partido ida: <span class="blanco">'+f.partidoIda.local+" "+f.partidoIda.golesLocal+" - "+f.partidoIda.golesVisitante+" "+f.partidoIda.visitante+"</span></div>":"";
e+='<div class="scoreglobal">Global: <span class="blanco">'+f.equipoLocal.nombre+' <span id="globalLoc">'+f.equipoLocal.golesGlobal+'</span> - <span id="globalVi">'+f.equipoVisitante.golesGlobal+"</span> "+f.equipoVisitante.nombre+"</span></div>";
e+="</div>";e+="</div>";e+='<div class="date_venue">';e+='<div class="when">'+f.fechaPartidoLetra.replace(/-/g," ")+" "+f.horaPartido+"</div>";e+=(typeof f.estadio!=="undefined")?'<div class="where">'+f.estadio.nombre+" "+f.estadio.ciudad+", "+f.estadio.pais+"</div>":"";
e+=(typeof f.datocurioso!=="undefined")?'<div class="info">'+f.datocurioso+"</div>":"";e+="</div>";e+="</div>";a.css("display","none").html(e).slideDown("slow");
if(f.tiempo.toLowerCase()!="final"){d.timeUpdate(f.fechaPartido,f.horaPartido);}(typeof f.paginas!=="undefined"&&d.IdPestanasMenu.length)?d.drawMenu(f.paginas):d.IdPestanasMenu.remove();
},updateGoles:function(j){var g="",g="",h="",l="",m="",p="",s="",i="",e="",k="",f="",r="",q="",o="",n="";var g=String(j.equipoLocal.goles),h=String(j.equipoVisitante.goles),l=String(j.equipoLocal.penales),m=String(j.equipoVisitante.penales),k=String(j.tiempo),n=String(j.equipoLocal.golesGlobal),q=String(j.equipoVisitante.golesGlobal);
p=$(".team1 .score").text(),s=$(".team2 .score").text(),i=$(".team1 .penal").text(),e=$(".team2 .penal").text(),f=$(".live_time").text(),o=$("#globalLoc").text(),r=$("#globalVi").text();
(g!==String(p))?d.nuevoValor($(".team1 .score"),g):"";(h!==String(s))?d.nuevoValor($(".team2 .score, .team2_m .score"),h):"";(i!==String(l))?d.nuevoValor($(".team1 .penal"),l):"";
(e!==String(m))?d.nuevoValor($(".team2 .penal,.team2_m .penal"),m):"";(k!==String(f))?d.nuevoValor($(".live_time"),k):"";(n!==String(o))?d.nuevoValor($("#globalLoc"),n):"";
(q!==String(r))?d.nuevoValor($("#globalVi"),q):"";},nuevoValor:function(e,f){e.parent(".penales").css("visibility","visible");e.fadeOut("slow",function(){$(this).empty();
$(this).text(f).slideDown("fast");});},timeUpdate:function(h,e){var f=0;var g=h.substring(3,5)+"-"+h.substring(0,2)+"-"+h.substring(8,10)+" "+e.substring(0,5)+":00";
$.ajax({url:"http://mxm.televisadeportes.esmas.com/deportes/home/timetvjsonp.js",async:false,cache:false,dataType:"jsonp",jsonpCallback:"timetv",success:function(o){var q="";
var l=0;var k=0;horas=o.timetv;q=o.fechatv.replace(/_/gi,"-").split("-");l=parseInt(q[1])+1;if(String(l).length==1){l="0"+l;}k=parseInt(q[2])+1900;fechas=l+"-"+q[0]+"-"+k;
fechas=fechas+" "+horas+":00";var u=new Date(g);var t=new Date(fechas);var p=Date.UTC(u.getFullYear(),u.getMonth()+1,u.getDate());var n=Date.UTC(t.getFullYear(),t.getMonth()+1,t.getDate());
if(parseFloat(p)<parseFloat(n)){console.log("MENOR");}else{if(parseFloat(p)==parseFloat(n)){console.log("IGUAL");f=60000;var j=parseInt(t.getHours()-u.getHours());
if(t.getHours()>=u.getHours()){console.log("ya empezo el partido");f=60000;}else{var s=u.getHours();var r=t.getHours();var w=u.getMinutes();var v=t.getMinutes();
var i=(((s-r)*60)+w)-v;if(i<=15){console.log("faltan menos de 15 min");f=60000;}else{console.log("faltan mas de 15 pero menos de 1hr "+i);(i>60)?f=900000:"";
}}console.log(f);setInterval(function(){d.loadInfo("update");},f);}else{if(parseFloat(p)>parseFloat(n)){console.log("MAYOR");}else{console.log("Error no actualizo");
}}}}});},drawMenu:function(g){var f="";f+='<div class="navarrowleft">';f+='<a class="wdg_matchesresult_navleft" href="#left"> ';f+='<span class="navlefticon">';
f+='<i class="tvsa-double-caret-left inactive"></i>';f+="</span>";f+="</a>";f+="</div>";f+='<div class="container">';f+='<div class="nav_smnu_sports_01_bar">';
f+="<ul>";f+=(typeof g.previo!=="undefined"&&g.previo!=="")?'<li class="previoMenuTim"> <a href="'+g.previo+'">Previo</a></li>':"";f+=(typeof g.alineacion!=="undefined"&&g.alineacion!=="")?'<li class="nav_smnu_sports_01_block alineacionMenuTim"><a href="'+g.alineacion+'" title="Alineacion">Alineaci√≥n</a></li>':"";
f+=(typeof g.rating!=="undefined"&&g.rating!=="")?'<li class="hide1 ratingMenuTim"><a href="'+g.rating+'" title="Rating">Rating</a></li>':"";f+=(typeof g.mxm!=="undefined"&&g.mxm!=="")?'<li class="nav_smnu_sports_01_block nav_smnu_sports_01_block2 mxmMenuTim"><a href="'+g.mxm+'" title="MxM">MxM</a></li>':"";
f+=(typeof g.pizarra!=="undefined"&&g.pizarra!=="")?'<li class="hide2 pizarraMenuTim"><a href="'+g.pizarra+'" title="Pizarra">Pizarra</a></li>':"";f+=(typeof g.cronica!=="undefined"&&g.cronica!=="")?'<li class="nav_smnu_sports_01_block nav_smnu_sports_01_block2 cronicaMenuTim"><a href="'+g.cronica+'" title="Cronica">Cronica</a></li>':"";
f+=(typeof g.video!=="undefined"&&g.video!=="")?'<li class="last nav_smnu_sports_01_block videoMenuTim"><a href="'+g.video+'" title="Video">Video</a></li>':"";
f+="</ul>";f+="</div>";f+="</div>";f+='<div class="navarrowright">';f+='<a class="wdg_matchesresult_navright" href="#right">';f+='<span class="navrighticon"><i class="tvsa-double-caret-right active"></i></span>';
f+="</a>";f+="</div>";d.IdPestanasMenu.html(f).show();var e=document.URL;(/previo/.test(e))?$(".previoMenuTim").addClass("current"):"";(/alineacion/.test(e))?$(".alineacionMenuTim").addClass("current"):"";
(/rating/.test(e))?$(".ratingMenuTim").addClass("current"):"";(/mxm/.test(e))?$(".mxmMenuTim").addClass("current"):"";(/pizarra/.test(e))?$(".pizarraMenuTim").addClass("current"):"";
(/cronica/.test(e))?$(".cronicaMenuTim").addClass("current"):"";(/video/.test(e))?$(".videoMenuTim").addClass("current"):"";}};(c.idtorneo!=0&&c.idteam!==0)?d.loadInfo():(console.log("---->Faltan los Id's de team y/o torneo"));
};})(jQuery);