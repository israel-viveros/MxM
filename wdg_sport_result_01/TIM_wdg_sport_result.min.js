/*!
 *   TIM Developer: Israel Viveros
 *   Version: 1.4.3
 *   Copyright: Televisa Interactive Media (2014)
 */
(function(){$.fn.WdgSportResult=function(b){var c=$.extend({idtorneo:0,idteam:0,tema:"deportes"},b);
var a=this;var d=null;var e={urlFinalHeader:"http://static-televisadeportes.esmas.com/sportsdata/futbol/data/"+c.idtorneo+"/"+c.idteam+"/match_header.js",IdPestanasMenu:$("#TIMnav_smnu_sports"),tmpescuchaListener:0,loadInfo:function(f){$.ajax({url:e.urlFinalHeader,type:"GET",dataType:"jsonp",jsonpCallback:"mxmheader",cache:false,async:false}).done(function(g){(f==="update")?e.updateGoles(g):e.drawHeader(g);
}).fail(function(g){console.log("Error al cargar: "+e.urlFinalHeader);console.log(g);});},drawHeader:function(k){var l=(c.tema==="mundial"&&typeof(k.equipoLocal.mundialImage)!=="undefined"&&k.equipoLocal.mundialImage!=="")?'<img class="linkbanderalocal" src="'+k.equipoLocal.mundialImage+'" alt="'+k.equipoLocal.nombre+'" width="48" height="36">':'<img class="linkbanderalocal" src="'+k.equipoLocal.lineupImage+'" alt="'+k.equipoLocal.nombre+'" width="48" height="36">';
var i=(c.tema==="mundial"&&typeof(k.equipoVisitante.mundialImage)!=="undefined"&&k.equipoVisitante.mundialImage!=="")?'<img class="linkbanderavisit" src="'+k.equipoVisitante.mundialImage+'" width="48" height="36" alt="'+k.equipoVisitante.nombre+'">':'<img class="linkbanderavisit" src="'+k.equipoVisitante.lineupImage+'" width="48" height="36" alt="'+k.equipoVisitante.nombre+'">';
var h=(c.tema==="mundial"&&typeof(k.equipoLocal.mundialImage)!=="undefined"&&k.equipoLocal.mundialImage!=="")?k.equipoLocal.mundialImage:k.equipoLocal.lineupImage;
var f=(c.tema==="mundial"&&typeof(k.equipoVisitante.mundialImage)!=="undefined"&&k.equipoVisitante.mundialImage!=="")?k.equipoVisitante.mundialImage:k.equipoVisitante.lineupImage;
var n='<span class="linkbanderalocal">'+k.equipoLocal.nombre+"</span>";var o='<span class="linkbanderavisit">'+k.equipoVisitante.nombre+"</span>";var r="",p=(parseInt(k.minuto)!==0)?k.minuto+"'":"";
r+='<div class="wrapper"><div class="match_title">';r+='<span class="hidden" id="datosTIMHeader"><span id="linklocalTIM">'+k.equipoLocal.url+'</span> <span id="linkvisitTIM">'+k.equipoVisitante.url+'</span> <span id="timeUpdateMxM">0</span> <span id="localAbrevTIM" class="hidden">'+k.equipoLocal.abrev+'</span> <span id="visitAbrevTIM" class="hidden">'+k.equipoVisitante.abrev+'</span> <span id="localImgTIM" class="hidden">'+h+'</span> <span id="visitImgTIM" class="hidden">'+f+'</span> <span id="localGolesTIM" class="hidden">'+k.equipoVisitante.goles+'</span> <span id="visitGolesTIM" class="hidden">'+k.equipoVisitante.goles+"</span>  </span>";
r+='<div class="cup_name">';r+=(k.transmisionVivo!=="")?'<div class="live-container textcolor-title3 background-color2 hidden" id="TIMVivoHeader" onclick="javascript:window.open(\''+k.transmisionVivo+'\');" style="cursor:pointer"><div class="icon-video"><i class="tvsa-videocamera"></i></div><div class="see-now">VER AHORA</div><div class="online">EN VIVO</div></div>':"";
r+='<div class="titulo textcolor-title3">'+k.torneo.nombre+"</div>";r+='<div class="subtitulo textcolor-title2">'+k.jornada.nombre+"</div>";r+="</div>";
r+="</div>";r+='<div class="live_time textcolor-title3 background-color1"><span>'+k.tiempo.replace(/'/g,"'")+" "+p+"</span></div>";r+='<div class="leftside">';
r+=(c.tema==="mundial")?'<div class="padre">':"";r+='<div class="team1">';r+='<div class="escudo">'+l+"</div>";r+='<div class="equipo">'+n+"</div>";r+='<div class="score">'+k.equipoLocal.goles+"</div>";
r+=(k.equipoLocal.penales===""||parseInt(k.equipoLocal.penales)===0)?'<div class="penales" style="visibility:hidden"><span class="penal"></span> PENALES</div>':'<div class="penales"><span class="penal">'+k.equipoLocal.penales+"</span> PENALES</div>";
r+="</div>";r+='<div class="dotted_separator"></div>';r+='<div class="team2">';r+=(k.equipoVisitante.penales===""||parseInt(k.equipoVisitante.penales)===0)?'<div class="penales" style="visibility:hidden"><span class="penal"></span> PENALES</div>':'<div class="penales"><span class="penal">'+k.equipoVisitante.penales+"</span> PENALES</div>";
r+='<div class="score">'+k.equipoVisitante.goles+"</div>";r+='<div class="equipo">'+o+"</div>";r+='<div class="escudo">'+i+"</div>";r+="</div>";r+='<div class="team2_m">';
r+=(k.equipoVisitante.lineupImage!=="")?'<div class="escudo">'+i+"</div>":"";r+='<div class="equipo">'+o+"</div>";r+='<div class="score">'+k.equipoVisitante.goles+"</div>";
r+=(k.equipoVisitante.penales===""||parseInt(k.equipoVisitante.penales)===0)?'<div class="penales" style="visibility:hidden"><span class="penal"></span> PENALES</div>':'<div class="penales"><span class="penal">'+k.equipoVisitante.penales+"</span> PENALES</div>";
r+="</div>";r+=(c.tema!=="mundial")?'<div class="solid_separator"></div>':"";r+='<div class="match_info">';r+=(typeof k.partidoIda!=="undefined")?'<div class="ida">Partido ida: <span class="blanco">'+k.partidoIda.local+" "+k.partidoIda.golesLocal+" - "+k.partidoIda.golesVisitante+" "+k.partidoIda.visitante+"</span></div>":"";
if(parseInt(k.equipoLocal.golesGlobal)!==0||parseInt(k.equipoVisitante.golesGlobal)!==0){r+='<div class="scoreglobal">Global: <span class="blanco">'+k.equipoLocal.nombre+' <span id="globalLoc">'+k.equipoLocal.golesGlobal+'</span> - <span id="globalVi">'+k.equipoVisitante.golesGlobal+"</span> "+k.equipoVisitante.nombre+"</span></div>";
}r+="</div>";r+="</div>";r+=(c.tema==="mundial")?'<div class="solid_separator"></div></div>':"";r+='<div class="date_venue">';r+='<div class="when">'+k.fechaPartidoLetra.replace(/-/g," ")+" <span>"+k.horaPartido+"</span></div>";
r+=(typeof k.estadio!=="undefined")?'<div class="where">Estadio '+k.estadio.nombre+"<br>"+k.estadio.ciudad+", "+k.estadio.pais+"</div>":"";r+=(typeof k.datocurioso!=="undefined")?'<div class="info">'+k.datocurioso+"</div>":"";
r+="</div>";r+="</div>";a.css("display","none").html(r).slideDown("slow",function(){$(this).css({display:"block"});});if(k.tiempo.toLowerCase()!=="final"){setTimeout(function(){e.timeUpdate(k.fechaPartido,k.horaPartido);
},300);setInterval(function(){e.timeUpdate(k.fechaPartido,k.horaPartido);},60000);}(typeof k.paginas!=="undefined"&&e.IdPestanasMenu.length)?e.drawMenu(k.paginas):e.IdPestanasMenu.hide();
var q=$("#linklocalTIM").text();var m=$("#linkvisitTIM").text();$(document).on("click",".linkbanderalocal",function(s){s.preventDefault();(q!=="")?window.open(q,"_blank"):"";
});$(document).on("click",".linkbanderavisit",function(s){s.preventDefault();(m!=="")?window.open(m,"_blank"):"";});$(document).on("hover",".linkbanderalocal",function(){if(q!==""){$(this).css("cursor","pointer");
}});$(document).on("hover",".linkbanderavisit",function(){if(m!==""){$(this).css("cursor","pointer");}});var g=0;var j=setInterval(function(){g++;if(g>5){clearInterval(j);
}$("img.linkbanderalocal").attr("src",$("#localImgTIM").text());$("img.linkbanderavisit").attr("src",$("#visitImgTIM").text());},3000);},updateGoles:function(k){var h="",h="",i="",m="",n="",r="",u="",j="",f="",l="",g="",t="",s="",q="",p="",o=(parseInt(k.minuto)!==0)?k.minuto+"'":"";
var h=String(k.equipoLocal.goles),i=String(k.equipoVisitante.goles),m=String(k.equipoLocal.penales),n=String(k.equipoVisitante.penales),l=String(k.tiempo)+" "+String(o),p=String(k.equipoLocal.golesGlobal),s=String(k.equipoVisitante.golesGlobal);
r=$(".team1 .score").text(),u=$(".team2 .score").text(),j=$(".team1 .penal").text(),f=$(".team2 .penal").text(),g=$(".live_time").text(),q=$("#globalLoc").text(),t=$("#globalVi").text();
(h!==String(r))?e.nuevoValor($(".team1 .score"),h):"";(i!==String(u))?e.nuevoValor($(".team2 .score, .team2_m .score"),i):"";(j!==String(m)&&parseInt(m)>0)?e.nuevoValor($(".team1 .penal"),m):"";
(f!==String(n)&&parseInt(n)>0)?e.nuevoValor($(".team2 .penal,.team2_m .penal"),n):"";(l!==String(g))?e.nuevoValor($(".live_time span"),l):"";(p!==String(q))?e.nuevoValor($("#globalLoc"),p):"";
(s!==String(t))?e.nuevoValor($("#globalVi"),s):"";},nuevoValor:function(f,g){f.parent(".penales").css("visibility","visible");f.fadeOut("slow",function(){$(this).empty();
$(this).text(g).slideDown("fast");});},timeUpdate:function(j,g){var f=$("#TIMVivoHeader");var h=0;var i="20"+j.substring(8,10)+"/"+j.substring(3,5)+"/"+j.substring(0,2)+" "+g.substring(0,5)+":00";
$.ajax({url:"http://mxm.televisadeportes.esmas.com/deportes/home/timetvjsonp.js",async:false,cache:false,dataType:"jsonp",jsonpCallback:"timetv",success:function(r){var t="",o=0,n=0,z=a.find(".live_time").text().toLowerCase().trim();
if(z==="previo"){a.find(".score").css("visibility","hidden");}else{a.find(".score").css("visibility","visible");}horas=r.timetv;t=r.fechatv.replace(/_/gi,"-").split("-");
o=parseInt(t[1])+1;if(String(o).length===1){o="0"+o;}n=parseInt(t[2])+1900;fechas=n+"/"+o+"/"+t[0];fechas=fechas+" "+horas+":00";var y=new Date(i);var x=new Date(fechas);
var s=Date.UTC(y.getFullYear(),y.getMonth()+1,y.getDate());var q=Date.UTC(x.getFullYear(),x.getMonth()+1,x.getDate());if(parseFloat(s)<parseFloat(q)){console.log("Fecha Menor(YA PASO EL PARTIDO)");
}else{if(parseFloat(s)===parseFloat(q)){console.log("Dia del Evento");var v=y.getTime(),l=x.getTime(),k=9000000,u=3600000,w=v+k,A=v-u,p=v-l;console.log("Hora Servidor: "+new Date(l));
console.log("Hora Partido: "+new Date(v));console.log("Hora Previo partido: "+new Date(A));console.log("Hora Fin partido: "+new Date(w));if(v<=l&&l<=w){console.log("El patido esta en vivo");
if(f.length){f.removeClass("hidden");}h=30000;}else{console.log(p);if(parseInt(p)<u&&parseInt(p)>0){console.log("Estamos a menos de 60 min del partido");
h=30000;}}}else{if(parseFloat(s)>parseFloat(q)){console.log("Fecha Mayor (AUN NO PASA EL PARTIDO)");}else{console.log("Error no actualizo");}}}if(h===0){h=(z!=="final"&&z!=="previo")?30000:0;
}console.log("Tiempo de actualizacion: "+h);clearInterval(d);if(h!==0){d=setInterval(function(){e.tmpescuchaListener=parseInt($("#timeUpdateMxM").text());
e.loadInfo("update");},h);}$("#timeUpdateMxM").text(h);if(c.tema==="mundial"){if(h!==0){$(".interaMenuTim").css("display","inline");}else{if(h===0){$(".interaMenuTim").css("display","none");
}}}}});},drawMenu:function(j){var i="";i+='<div class="navarrowleft">';i+='<a class="wdg_matchesresult_navleft" href="#left"> ';i+='<span class="navlefticon"><i class="tvsa-double-caret-left inactive"></i></span></a></div>';
i+='<div class="container">';i+='<div class="nav_smnu_sports_01_bar"><ul>';i+=(typeof j.previo!=="undefined"&&j.previo!=="")?'<li class="previoMenuTim"> <a href="'+j.previo+'" target="_parent">Previo</a></li>':"";
i+=(typeof j.alineacion!=="undefined"&&j.alineacion!=="")?'<li class="nav_smnu_sports_01_block alineacionMenuTim"><a href="'+j.alineacion+'" target="_parent" title="Alineaci\u00F3n">Alineaci\u00F3n</a></li>':"";
i+=(typeof j.rating!=="undefined"&&j.rating!==""&&c.tema!=="mundial")?'<li class="hide1 ratingMenuTim"><a href="'+j.rating+'" title="Rating">Rating</a></li>':"";
i+=(typeof j.mxm!=="undefined"&&j.mxm!=="")?'<li class="nav_smnu_sports_01_block nav_smnu_sports_01_block2 mxmMenuTim"><a href="'+j.mxm+'" target="_parent" title="MxM">MxM</a></li>':"";
i+=(typeof j.pizarra!=="undefined"&&j.pizarra!==""&&c.tema!=="mundial")?'<li class="hide2 pizarraMenuTim"><a href="'+j.pizarra+'" title="Pizarra">Pizarra</a></li>':"";
i+=(typeof j.cronica!=="undefined"&&j.cronica!=="")?'<li class="nav_smnu_sports_01_block nav_smnu_sports_01_block2 cronicaMenuTim"><a href="'+j.cronica+'" target="_parent" title="Cr\u00F3nica">Cr\u00F3nica</a></li>':"";
i+=(typeof j.video!=="undefined"&&j.video!=="")?'<li class="last nav_smnu_sports_01_block videoMenuTim"><a href="'+j.video+'" title="Video" target="_parent">Video</a></li>':"";
i+=(parseInt(c.idteam)===25521||parseInt(c.idteam)===25395||parseInt(c.idteam)===25487||parseInt(c.idteam)===25488)?'<li class="last nav_smnu_sports_01_block camara360"><a href="camara360.html" title="camara" target="_parent">C\u00E1mara 360</a></li>':"";
i+=(c.tema==="mundial"&&c.idtorneo!==369)?'<li class="last nav_smnu_sports_01_block interaMenuTim"><a href="interacciontd.html" title="interacci\u00F3n TD" target="_parent">Interacci\u00F3n TD</a></li>':"";
i+="</ul></div></div>";i+='<div class="navarrowright"><a class="wdg_matchesresult_navright" href="#right">';i+='<span class="navrighticon"><i class="tvsa-double-caret-right active"></i></span></a></div>';
e.IdPestanasMenu.html(i).show();var h=document.URL;(/previo.html/.test(h))?$(".previoMenuTim").addClass("current"):"";(/previo_m.html/.test(h))?$(".previoMenuTim").addClass("current"):"";
(/alineacion.html/.test(h))?$(".alineacionMenuTim").addClass("current"):"";(/alineacion_m.html/.test(h))?$(".alineacionMenuTim").addClass("current"):"";
(/rating.html/.test(h))?$(".ratingMenuTim").addClass("current"):"";(/mxm.html/.test(h))?$(".mxmMenuTim").addClass("current"):"";(/mxm_m.html/.test(h))?$(".mxmMenuTim").addClass("current"):"";
(/pizarra.html/.test(h))?$(".pizarraMenuTim").addClass("current"):"";(/cronica.html/.test(h))?$(".cronicaMenuTim").addClass("current"):"";(/cronica_m.html/.test(h))?$(".cronicaMenuTim").addClass("current"):"";
(/video.html/.test(h))?$(".videoMenuTim").addClass("current"):"";(/interacciontd.html/.test(h))?$(".interaMenuTim").addClass("current"):"";(/camara360.html/.test(h))?$(".camara360").addClass("current"):"";
if(c.tema==="mundial"){var g=[25521,25395,25487,25488];for(var f=0;f<g.length;f++){if(parseInt(c.idteam)===g[f]){$(".interaMenuTim").css("display","none");
}}}}};if(c.idtorneo!==0&&c.idteam!==0){setTimeout(function(){e.loadInfo();},300);}else{(console.log("---->Faltan los Id's de team y/o torneo"));}};})(jQuery);
